"use strict";var jn=Object.defineProperty,Vn=Object.defineProperties;var An=Object.getOwnPropertyDescriptors;var Zt=Object.getOwnPropertySymbols;var In=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable;var er=(r,e,t)=>e in r?jn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,j=(r,e)=>{for(var t in e||(e={}))In.call(e,t)&&er(r,t,e[t]);if(Zt)for(var t of Zt(e))xn.call(e,t)&&er(r,t,e[t]);return r},$=(r,e)=>Vn(r,An(e));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var N=require("graphql"),ft=function(r,e){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ft(r,e)};function B(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ft(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var p=function(){return p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},p.apply(this,arguments)};function ce(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Y(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(f){try{u(n.next(f))}catch(h){o(h)}}function c(f){try{u(n.throw(f))}catch(h){o(h)}}function u(f){f.done?a(f.value):i(f.value).then(s,c)}u((n=n.apply(r,e||[])).next())})}function X(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ie(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}var Je="Invariant Violation",tr=Object.setPrototypeOf,Ln=tr===void 0?function(r,e){return r.__proto__=e,r}:tr,q=function(r){B(e,r);function e(t){t===void 0&&(t=Je);var n=r.call(this,typeof t=="number"?Je+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return n.framesToPop=1,n.name=Je,Ln(n,e.prototype),n}return e}(Error);function b(r,e){if(!r)throw new q(e)}var Ur=["debug","log","warn","error","silent"],Nn=Ur.indexOf("log");function Te(r){return function(){if(Ur.indexOf(r)>=Nn){var e=console[r]||console.log;return e.apply(console,arguments)}}}(function(r){r.debug=Te("debug"),r.log=Te("log"),r.warn=Te("warn"),r.error=Te("error")})(b||(b={}));function W(r){try{return r()}catch{}}var rr=W(function(){return globalThis})||W(function(){return window})||W(function(){return self})||W(function(){return global})||W(function(){return W.constructor("return this")()}),nr="__",ir=[nr,nr].join("DEV");function zn(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(rr,ir,{value:W(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),rr[ir]}}var Ye=zn();function G(r){try{return r()}catch{}}var lt=G(function(){return globalThis})||G(function(){return window})||G(function(){return self})||G(function(){return global})||G(function(){return G.constructor("return this")()}),ht=!1;function $n(){lt&&!G(function(){return"production"})&&!G(function(){return process})&&(Object.defineProperty(lt,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),ht=!0)}$n();function ar(){ht&&(delete lt.process,ht=!1)}function Bn(){return typeof N.Source=="function",ar()}function Wn(){__DEV__?b(typeof Ye=="boolean",Ye):b(typeof Ye=="boolean",36)}Bn();Wn();function Be(r,e){var t=r.directives;return!t||!t.length?!0:Hn(t).every(function(n){var i=n.directive,a=n.ifArgument,o=!1;return a.value.kind==="Variable"?(o=e&&e[a.value.name.value],__DEV__?b(o!==void 0,"Invalid variable referenced in @".concat(i.name.value," directive.")):b(o!==void 0,37)):o=a.value.value,i.name.value==="skip"?!o:o})}function Un(r){var e=[];return N.visit(r,{Directive:function(t){e.push(t.name.value)}}),e}function pt(r,e){return Un(e).some(function(t){return r.indexOf(t)>-1})}function Kn(r){return r&&pt(["client"],r)&&pt(["export"],r)}function Gn(r){var e=r.name.value;return e==="skip"||e==="include"}function Hn(r){var e=[];return r&&r.length&&r.forEach(function(t){if(!!Gn(t)){var n=t.arguments,i=t.name.value;__DEV__?b(n&&n.length===1,"Incorrect number of arguments for the @".concat(i," directive.")):b(n&&n.length===1,38);var a=n[0];__DEV__?b(a.name&&a.name.value==="if","Invalid argument for the @".concat(i," directive.")):b(a.name&&a.name.value==="if",39);var o=a.value;__DEV__?b(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),"Argument for the @".concat(i," directive must be a variable or a boolean value.")):b(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),40),e.push({directive:t,ifArgument:a})}}),e}function Jn(r,e){var t=e,n=[];r.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new q("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new q(41);a.kind==="FragmentDefinition"&&n.push(a)}),typeof t=="undefined"&&(__DEV__?b(n.length===1,"Found ".concat(n.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):b(n.length===1,42),t=n[0].name.value);var i=p(p({},r),{definitions:Ie([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],r.definitions,!0)});return i}function We(r){r===void 0&&(r=[]);var e={};return r.forEach(function(t){e[t.name.value]=t}),e}function Pt(r,e){switch(r.kind){case"InlineFragment":return r;case"FragmentSpread":{var t=e&&e[r.name.value];return __DEV__?b(t,"No fragment named ".concat(r.name.value,".")):b(t,43),t}default:return null}}function Q(r){return r!==null&&typeof r=="object"}function se(r){return{__ref:String(r)}}function D(r){return Boolean(r&&typeof r=="object"&&typeof r.__ref=="string")}function Yn(r){return Q(r)&&r.kind==="Document"&&Array.isArray(r.definitions)}function Xn(r){return r.kind==="StringValue"}function Zn(r){return r.kind==="BooleanValue"}function ei(r){return r.kind==="IntValue"}function ti(r){return r.kind==="FloatValue"}function ri(r){return r.kind==="Variable"}function ni(r){return r.kind==="ObjectValue"}function ii(r){return r.kind==="ListValue"}function ai(r){return r.kind==="EnumValue"}function oi(r){return r.kind==="NullValue"}function fe(r,e,t,n){if(ei(t)||ti(t))r[e.value]=Number(t.value);else if(Zn(t)||Xn(t))r[e.value]=t.value;else if(ni(t)){var i={};t.fields.map(function(o){return fe(i,o.name,o.value,n)}),r[e.value]=i}else if(ri(t)){var a=(n||{})[t.name.value];r[e.value]=a}else if(ii(t))r[e.value]=t.values.map(function(o){var s={};return fe(s,e,o,n),s[e.value]});else if(ai(t))r[e.value]=t.value;else if(oi(t))r[e.value]=null;else throw __DEV__?new q('The inline argument "'.concat(e.value,'" of kind "').concat(t.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new q(52)}function si(r,e){var t=null;r.directives&&(t={},r.directives.forEach(function(i){t[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,s=a.value;return fe(t[i.name.value],o,s,e)})}));var n=null;return r.arguments&&r.arguments.length&&(n={},r.arguments.forEach(function(i){var a=i.name,o=i.value;return fe(n,a,o,e)})),jt(r.name.value,n,t)}var ui=["connection","include","skip","client","rest","export"],jt=Object.assign(function(r,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var n=t.connection.filter?t.connection.filter:[];n.sort();var i={};return n.forEach(function(s){i[s]=e[s]}),"".concat(t.connection.key,"(").concat(pe(i),")")}else return t.connection.key;var a=r;if(e){var o=pe(e);a+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(s){ui.indexOf(s)===-1&&(t[s]&&Object.keys(t[s]).length?a+="@".concat(s,"(").concat(pe(t[s]),")"):a+="@".concat(s))}),a},{setStringify:function(r){var e=pe;return pe=r,e}}),pe=function(e){return JSON.stringify(e,ci)};function ci(r,e){return Q(e)&&!Array.isArray(e)&&(e=Object.keys(e).sort().reduce(function(t,n){return t[n]=e[n],t},{})),e}function Ue(r,e){if(r.arguments&&r.arguments.length){var t={};return r.arguments.forEach(function(n){var i=n.name,a=n.value;return fe(t,i,a,e)}),t}return null}function ee(r){return r.alias?r.alias.value:r.name.value}function vt(r,e,t){if(typeof r.__typename=="string")return r.__typename;for(var n=0,i=e.selections;n<i.length;n++){var a=i[n];if(U(a)){if(a.name.value==="__typename")return r[ee(a)]}else{var o=vt(r,Pt(a,t).selectionSet,t);if(typeof o=="string")return o}}}function U(r){return r.kind==="Field"}function Kr(r){return r.kind==="InlineFragment"}function ke(r){__DEV__?b(r&&r.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):b(r&&r.kind==="Document",44);var e=r.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw __DEV__?new q('Schema type definitions not allowed in queries. Found: "'.concat(t.kind,'"')):new q(45);return t});return __DEV__?b(e.length<=1,"Ambiguous GraphQL document: contains ".concat(e.length," operations")):b(e.length<=1,46),r}function De(r){return ke(r),r.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function dt(r){return r.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Ke(r){return r.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function Gr(r){var e=De(r);return __DEV__?b(e&&e.operation==="query","Must contain a query definition."):b(e&&e.operation==="query",47),e}function fi(r){__DEV__?b(r.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):b(r.kind==="Document",48),__DEV__?b(r.definitions.length<=1,"Fragment must have exactly one definition."):b(r.definitions.length<=1,49);var e=r.definitions[0];return __DEV__?b(e.kind==="FragmentDefinition","Must be a fragment definition."):b(e.kind==="FragmentDefinition",50),e}function Vt(r){ke(r);for(var e,t=0,n=r.definitions;t<n.length;t++){var i=n[t];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw __DEV__?new q("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new q(51)}function At(r){var e=Object.create(null),t=r&&r.variableDefinitions;return t&&t.length&&t.forEach(function(n){n.defaultValue&&fe(e,n.variable.name,n.defaultValue)}),e}function or(r,e,t){var n=0;return r.forEach(function(i,a){e.call(this,i,a,r)&&(r[n++]=i)},t),r.length=n,r}var sr={kind:"Field",name:{kind:"Name",value:"__typename"}};function Hr(r,e){return r.selectionSet.selections.every(function(t){return t.kind==="FragmentSpread"&&Hr(e[t.name.value],e)})}function It(r){return Hr(De(r)||fi(r),We(Ke(r)))?null:r}function ur(r){return function(t){return r.some(function(n){return n.name&&n.name===t.name.value||n.test&&n.test(t)})}}function Jr(r,e){var t=Object.create(null),n=[],i=Object.create(null),a=[],o=It(N.visit(e,{Variable:{enter:function(s,c,u){u.kind!=="VariableDefinition"&&(t[s.name.value]=!0)}},Field:{enter:function(s){if(r&&s.directives){var c=r.some(function(u){return u.remove});if(c&&s.directives&&s.directives.some(ur(r)))return s.arguments&&s.arguments.forEach(function(u){u.value.kind==="Variable"&&n.push({name:u.value.name.value})}),s.selectionSet&&Yr(s.selectionSet).forEach(function(u){a.push({name:u.name.value})}),null}}},FragmentSpread:{enter:function(s){i[s.name.value]=!0}},Directive:{enter:function(s){if(ur(r)(s))return null}}}));return o&&or(n,function(s){return!!s.name&&!t[s.name]}).length&&(o=vi(n,o)),o&&or(a,function(s){return!!s.name&&!i[s.name]}).length&&(o=di(a,o)),o}var xt=Object.assign(function(r){return N.visit(ke(r),{SelectionSet:{enter:function(e,t,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(s){return U(s)&&(s.name.value==="__typename"||s.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(U(o)&&o.directives&&o.directives.some(function(s){return s.name.value==="export"})))return p(p({},e),{selections:Ie(Ie([],i,!0),[sr],!1)})}}}}}})},{added:function(r){return r===sr}}),li={test:function(r){var e=r.name.value==="connection";return e&&(!r.arguments||!r.arguments.some(function(t){return t.name.value==="key"}))&&__DEV__&&b.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),e}};function hi(r){return Jr([li],ke(r))}function pi(r){return function(t){return r.some(function(n){return t.value&&t.value.kind==="Variable"&&t.value.name&&(n.name===t.value.name.value||n.test&&n.test(t))})}}function vi(r,e){var t=pi(r);return It(N.visit(e,{OperationDefinition:{enter:function(n){return p(p({},n),{variableDefinitions:n.variableDefinitions?n.variableDefinitions.filter(function(i){return!r.some(function(a){return a.name===i.variable.name.value})}):[]})}},Field:{enter:function(n){var i=r.some(function(o){return o.remove});if(i){var a=0;if(n.arguments&&n.arguments.forEach(function(o){t(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(t(n))return null}}}))}function di(r,e){function t(n){if(r.some(function(i){return i.name===n.name.value}))return null}return It(N.visit(e,{FragmentSpread:{enter:t},FragmentDefinition:{enter:t}}))}function Yr(r){var e=[];return r.selections.forEach(function(t){(U(t)||Kr(t))&&t.selectionSet?Yr(t.selectionSet).forEach(function(n){return e.push(n)}):t.kind==="FragmentSpread"&&e.push(t)}),e}function yi(r){var e=Vt(r),t=e.operation;if(t==="query")return r;var n=N.visit(r,{OperationDefinition:{enter:function(i){return p(p({},i),{operation:"query"})}}});return n}function mi(r){ke(r);var e=Jr([{test:function(t){return t.name.value==="client"},remove:!0}],r);return e&&(e=N.visit(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet){var n=t.selectionSet.selections.every(function(i){return U(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var gi=Object.prototype.hasOwnProperty;function cr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Xr(r)}function Xr(r){var e=r[0]||{},t=r.length;if(t>1)for(var n=new qe,i=1;i<t;++i)e=n.merge(e,r[i]);return e}var bi=function(r,e,t){return this.merge(r[t],e[t])},qe=function(){function r(e){e===void 0&&(e=bi),this.reconciler=e,this.isObject=Q,this.pastCopies=new Set}return r.prototype.merge=function(e,t){for(var n=this,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return Q(t)&&Q(e)?(Object.keys(t).forEach(function(o){if(gi.call(e,o)){var s=e[o];if(t[o]!==s){var c=n.reconciler.apply(n,Ie([e,t,o],i,!1));c!==s&&(e=n.shallowCopyForMerge(e),e[o]=c)}}else e=n.shallowCopyForMerge(e),e[o]=t[o]}),e):t},r.prototype.shallowCopyForMerge=function(e){if(Q(e)){if(this.pastCopies.has(e)){if(!Object.isFrozen(e))return e;this.pastCopies.delete(e)}Array.isArray(e)?e=e.slice(0):e=p({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)}return e},r}();function wi(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=_i(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(r,e){if(!!r){if(typeof r=="string")return fr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fr(r,e)}}function fr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function lr(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Lt(r,e,t){return e&&lr(r.prototype,e),t&&lr(r,t),r}var Nt=function(){return typeof Symbol=="function"},zt=function(r){return Nt()&&Boolean(Symbol[r])},$t=function(r){return zt(r)?Symbol[r]:"@@"+r};Nt()&&!zt("observable")&&(Symbol.observable=Symbol("observable"));var Si=$t("iterator"),yt=$t("observable"),Zr=$t("species");function xe(r,e){var t=r[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function ve(r){var e=r.constructor;return e!==void 0&&(e=e[Zr],e===null&&(e=void 0)),e!==void 0?e:F}function Oi(r){return r instanceof F}function le(r){le.log?le.log(r):setTimeout(function(){throw r})}function Pe(r){Promise.resolve().then(function(){try{r()}catch(e){le(e)}})}function en(r){var e=r._cleanup;if(e!==void 0&&(r._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=xe(e,"unsubscribe");t&&t.call(e)}}catch(n){le(n)}}function mt(r){r._observer=void 0,r._queue=void 0,r._state="closed"}function Ei(r){var e=r._queue;if(!!e){r._queue=void 0,r._state="ready";for(var t=0;t<e.length&&(tn(r,e[t].type,e[t].value),r._state!=="closed");++t);}}function tn(r,e,t){r._state="running";var n=r._observer;try{var i=xe(n,e);switch(e){case"next":i&&i.call(n,t);break;case"error":if(mt(r),i)i.call(n,t);else throw t;break;case"complete":mt(r),i&&i.call(n);break}}catch(a){le(a)}r._state==="closed"?en(r):r._state==="running"&&(r._state="ready")}function Xe(r,e,t){if(r._state!=="closed"){if(r._state==="buffering"){r._queue.push({type:e,value:t});return}if(r._state!=="ready"){r._state="buffering",r._queue=[{type:e,value:t}],Pe(function(){return Ei(r)});return}tn(r,e,t)}}var ki=function(){function r(t,n){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new Di(this);try{this._cleanup=n.call(void 0,i)}catch(a){i.error(a)}this._state==="initializing"&&(this._state="ready")}var e=r.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(mt(this),en(this))},Lt(r,[{key:"closed",get:function(){return this._state==="closed"}}]),r}(),Di=function(){function r(t){this._subscription=t}var e=r.prototype;return e.next=function(n){Xe(this._subscription,"next",n)},e.error=function(n){Xe(this._subscription,"error",n)},e.complete=function(){Xe(this._subscription,"complete")},Lt(r,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),r}(),F=function(){function r(t){if(!(this instanceof r))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=r.prototype;return e.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new ki(n,this._subscriber)},e.forEach=function(n){var i=this;return new Promise(function(a,o){if(typeof n!="function"){o(new TypeError(n+" is not a function"));return}function s(){c.unsubscribe(),a()}var c=i.subscribe({next:function(u){try{n(u,s)}catch(f){o(f),c.unsubscribe()}},error:o,complete:a})})},e.map=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=ve(this);return new a(function(o){return i.subscribe({next:function(s){try{s=n(s)}catch(c){return o.error(c)}o.next(s)},error:function(s){o.error(s)},complete:function(){o.complete()}})})},e.filter=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=ve(this);return new a(function(o){return i.subscribe({next:function(s){try{if(!n(s))return}catch(c){return o.error(c)}o.next(s)},error:function(s){o.error(s)},complete:function(){o.complete()}})})},e.reduce=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=ve(this),o=arguments.length>1,s=!1,c=arguments[1],u=c;return new a(function(f){return i.subscribe({next:function(h){var l=!s;if(s=!0,!l||o)try{u=n(u,h)}catch(v){return f.error(v)}else u=h},error:function(h){f.error(h)},complete:function(){if(!s&&!o)return f.error(new TypeError("Cannot reduce an empty sequence"));f.next(u),f.complete()}})})},e.concat=function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=ve(this);return new s(function(c){var u,f=0;function h(l){u=l.subscribe({next:function(v){c.next(v)},error:function(v){c.error(v)},complete:function(){f===a.length?(u=void 0,c.complete()):h(s.from(a[f++]))}})}return h(n),function(){u&&(u.unsubscribe(),u=void 0)}})},e.flatMap=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=ve(this);return new a(function(o){var s=[],c=i.subscribe({next:function(f){if(n)try{f=n(f)}catch(l){return o.error(l)}var h=a.from(f).subscribe({next:function(l){o.next(l)},error:function(l){o.error(l)},complete:function(){var l=s.indexOf(h);l>=0&&s.splice(l,1),u()}});s.push(h)},error:function(f){o.error(f)},complete:function(){u()}});function u(){c.closed&&s.length===0&&o.complete()}return function(){s.forEach(function(f){return f.unsubscribe()}),c.unsubscribe()}})},e[yt]=function(){return this},r.from=function(n){var i=typeof this=="function"?this:r;if(n==null)throw new TypeError(n+" is not an object");var a=xe(n,yt);if(a){var o=a.call(n);if(Object(o)!==o)throw new TypeError(o+" is not an object");return Oi(o)&&o.constructor===i?o:new i(function(s){return o.subscribe(s)})}if(zt("iterator")&&(a=xe(n,Si),a))return new i(function(s){Pe(function(){if(!s.closed){for(var c=wi(a.call(n)),u;!(u=c()).done;){var f=u.value;if(s.next(f),s.closed)return}s.complete()}})});if(Array.isArray(n))return new i(function(s){Pe(function(){if(!s.closed){for(var c=0;c<n.length;++c)if(s.next(n[c]),s.closed)return;s.complete()}})});throw new TypeError(n+" is not observable")},r.of=function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=typeof this=="function"?this:r;return new o(function(s){Pe(function(){if(!s.closed){for(var c=0;c<i.length;++c)if(s.next(i[c]),s.closed)return;s.complete()}})})},Lt(r,null,[{key:Zr,get:function(){return this}}]),r}();Nt()&&Object.defineProperty(F,Symbol("extensions"),{value:{symbol:yt,hostReportError:le},configurable:!0});function qi(r){var e,t=r.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var ie;typeof self!="undefined"?ie=self:typeof window!="undefined"?ie=window:typeof global!="undefined"?ie=global:typeof module!="undefined"?ie=module:ie=Function("return this")();qi(ie);var hr=F.prototype,pr="@@observable";hr[pr]||(hr[pr]=function(){return this});var Ci=Object.prototype.toString;function rn(r){return gt(r)}function gt(r,e){switch(Ci.call(r)){case"[object Array]":{if(e=e||new Map,e.has(r))return e.get(r);var t=r.slice(0);return e.set(r,t),t.forEach(function(i,a){t[a]=gt(i,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(r))return e.get(r);var n=Object.create(Object.getPrototypeOf(r));return e.set(r,n),Object.keys(r).forEach(function(i){n[i]=gt(r[i],e)}),n}default:return r}}function Fi(r){var e=new Set([r]);return e.forEach(function(t){Q(t)&&Ri(t)===t&&Object.getOwnPropertyNames(t).forEach(function(n){Q(t[n])&&e.add(t[n])})}),r}function Ri(r){if(__DEV__&&!Object.isFrozen(r))try{Object.freeze(r)}catch(e){if(e instanceof TypeError)return null;throw e}return r}function bt(r){return __DEV__&&Fi(r),r}function ge(r,e,t){var n=[];r.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](t)})}function Ze(r,e,t){return new F(function(n){var i=n.next,a=n.error,o=n.complete,s=0,c=!1,u={then:function(v){return new Promise(function(y){return y(v())})}};function f(v,y){return v?function(d){++s;var m=function(){return v(d)};u=u.then(m,m).then(function(g){--s,i&&i.call(n,g),c&&h.complete()},function(g){throw--s,g}).catch(function(g){a&&a.call(n,g)})}:function(d){return y&&y.call(n,d)}}var h={next:f(e,i),error:f(t,a),complete:function(){c=!0,s||o&&o.call(n)}},l=r.subscribe(h);return function(){return l.unsubscribe()}})}var re=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),Qi=typeof WeakSet=="function",Ti=typeof Symbol=="function"&&typeof Symbol.for=="function";function nn(r){function e(t){Object.defineProperty(r,t,{value:F})}return Ti&&Symbol.species&&e(Symbol.species),e("@@species"),r}function vr(r){return r&&typeof r.then=="function"}var me=function(r){B(e,r);function e(t){var n=r.call(this,function(i){return n.addObserver(i),function(){return n.removeObserver(i)}})||this;return n.observers=new Set,n.addCount=0,n.promise=new Promise(function(i,a){n.resolve=i,n.reject=a}),n.handlers={next:function(i){n.sub!==null&&(n.latest=["next",i],ge(n.observers,"next",i))},error:function(i){var a=n.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),n.sub=null,n.latest=["error",i],n.reject(i),ge(n.observers,"error",i))},complete:function(){if(n.sub!==null){var i=n.sources.shift();i?vr(i)?i.then(function(a){return n.sub=a.subscribe(n.handlers)}):n.sub=i.subscribe(n.handlers):(n.sub=null,n.latest&&n.latest[0]==="next"?n.resolve(n.latest[1]):n.resolve(),ge(n.observers,"complete"))}}},n.cancel=function(i){n.reject(i),n.sources=[],n.handlers.complete()},n.promise.catch(function(i){}),typeof t=="function"&&(t=[new F(t)]),vr(t)?t.then(function(i){return n.start(i)},n.handlers.error):n.start(t),n}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var n=this.latest[0],i=t[n];i&&i.call(t,this.latest[1]),this.sub===null&&n==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t),++this.addCount)},e.prototype.removeObserver=function(t,n){this.observers.delete(t)&&--this.addCount<1&&!n&&this.handlers.error(new Error("Observable cancelled prematurely"))},e.prototype.cleanup=function(t){var n=this,i=!1,a=function(){i||(i=!0,n.observers.delete(o),t())},o={next:a,error:a,complete:a},s=this.addCount;this.addObserver(o),this.addCount=s},e}(F);nn(me);function te(r){return Array.isArray(r)&&r.length>0}function je(r){return r.errors&&r.errors.length>0||!1}function _e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Object.create(null);return r.forEach(function(n){!n||Object.keys(n).forEach(function(i){var a=n[i];a!==void 0&&(t[i]=a)})}),t}var dr=new Map;function wt(r){var e=dr.get(r)||1;return dr.set(r,e+1),"".concat(r,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Mi(r){var e=wt("stringifyForDisplay");return JSON.stringify(r,function(t,n){return n===void 0?e:n}).split(JSON.stringify(e)).join("<undefined>")}function yr(r){return new F(function(e){e.error(r)})}var mr=function(r,e,t){var n=new Error(t);throw n.name="ServerError",n.response=r,n.statusCode=r.status,n.result=e,n};function Pi(r){for(var e=["query","operationName","variables","extensions","context"],t=0,n=Object.keys(r);t<n.length;t++){var i=n[t];if(e.indexOf(i)<0)throw __DEV__?new q("illegal argument: ".concat(i)):new q(24)}return r}function ji(r,e){var t=p({},r),n=function(a){typeof a=="function"?t=p(p({},t),a(t)):t=p(p({},t),a)},i=function(){return p({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),e}function Vi(r){var e={variables:r.variables||{},extensions:r.extensions||{},operationName:r.operationName,query:r.query};return e.operationName||(e.operationName=typeof e.query!="string"?dt(e.query)||void 0:""),e}function gr(r,e){return e?e(r):F.of()}function de(r){return typeof r=="function"?new Ce(r):r}function Me(r){return r.request.length<=1}var Ai=function(r){B(e,r);function e(t,n){var i=r.call(this,t)||this;return i.link=n,i}return e}(Error),Ce=function(){function r(e){e&&(this.request=e)}return r.empty=function(){return new r(function(){return F.of()})},r.from=function(e){return e.length===0?r.empty():e.map(de).reduce(function(t,n){return t.concat(n)})},r.split=function(e,t,n){var i=de(t),a=de(n||new r(gr));return Me(i)&&Me(a)?new r(function(o){return e(o)?i.request(o)||F.of():a.request(o)||F.of()}):new r(function(o,s){return e(o)?i.request(o,s)||F.of():a.request(o,s)||F.of()})},r.execute=function(e,t){return e.request(ji(t.context,Vi(Pi(t))))||F.of()},r.concat=function(e,t){var n=de(e);if(Me(n))return __DEV__&&b.warn(new Ai("You are calling concat on a terminating link, which will have no effect",n)),n;var i=de(t);return Me(i)?new r(function(a){return n.request(a,function(o){return i.request(o)||F.of()})||F.of()}):new r(function(a,o){return n.request(a,function(s){return i.request(s,o)||F.of()})||F.of()})},r.prototype.split=function(e,t,n){return this.concat(r.split(e,t,n||new r(gr)))},r.prototype.concat=function(e){return r.concat(this,e)},r.prototype.request=function(e,t){throw __DEV__?new q("request is not implemented"):new q(19)},r.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},r.prototype.setOnError=function(e){return this.onError=e,this},r}(),_t=Ce.execute,Ii="3.5.10",br=Object.prototype.hasOwnProperty;function xi(r){return function(e){return e.text().then(function(t){try{return JSON.parse(t)}catch(i){var n=i;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}}).then(function(t){return e.status>=300&&mr(e,t,"Response not successful: Received status code ".concat(e.status)),!Array.isArray(t)&&!br.call(t,"data")&&!br.call(t,"errors")&&mr(e,t,"Server response was missing for query '".concat(Array.isArray(r)?r.map(function(n){return n.operationName}):r.operationName,"'.")),t})}}var St=function(r,e){var t;try{t=JSON.stringify(r)}catch(i){var n=__DEV__?new q("Network request failed. ".concat(e," is not serializable: ").concat(i.message)):new q(21);throw n.parseError=i,n}return t},Li={includeQuery:!0,includeExtensions:!1},Ni={accept:"*/*","content-type":"application/json"},zi={method:"POST"},$i={http:Li,headers:Ni,options:zi},Bi=function(r,e){return e(r)};function Wi(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i={},a={};t.forEach(function(h){i=p(p(p({},i),h.options),{headers:p(p({},i.headers),Ui(h.headers))}),h.credentials&&(i.credentials=h.credentials),a=p(p({},a),h.http)});var o=r.operationName,s=r.extensions,c=r.variables,u=r.query,f={operationName:o,variables:c};return a.includeExtensions&&(f.extensions=s),a.includeQuery&&(f.query=e(u,N.print)),{options:i,body:f}}function Ui(r){if(r){var e=Object.create(null);return Object.keys(Object(r)).forEach(function(t){e[t.toLowerCase()]=r[t]}),e}return r}var Ki=function(r){if(!r&&typeof fetch=="undefined")throw __DEV__?new q(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new q(20)},Gi=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var r=new AbortController,e=r.signal;return{controller:r,signal:e}},Hi=function(r,e){var t=r.getContext(),n=t.uri;return n||(typeof e=="function"?e(r):e||"/graphql")};function Ji(r,e){var t=[],n=function(h,l){t.push("".concat(h,"=").concat(encodeURIComponent(l)))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=St(e.variables,"Variables map")}catch(h){return{parseError:h}}n("variables",i)}if(e.extensions){var a=void 0;try{a=St(e.extensions,"Extensions map")}catch(h){return{parseError:h}}n("extensions",a)}var o="",s=r,c=r.indexOf("#");c!==-1&&(o=r.substr(c),s=r.substr(0,c));var u=s.indexOf("?")===-1?"?":"&",f=s+u+t.join("&")+o;return{newURI:f}}var wr=W(function(){return fetch}),Yi=function(r){r===void 0&&(r={});var e=r.uri,t=e===void 0?"/graphql":e,n=r.fetch,i=r.print,a=i===void 0?Bi:i,o=r.includeExtensions,s=r.useGETForQueries,c=r.includeUnusedVariables,u=c===void 0?!1:c,f=ce(r,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&Ki(n||wr);var h={http:{includeExtensions:o},options:f.fetchOptions,credentials:f.credentials,headers:f.headers};return new Ce(function(l){var v=Hi(l,t),y=l.getContext(),d={};if(y.clientAwareness){var m=y.clientAwareness,g=m.name,S=m.version;g&&(d["apollographql-client-name"]=g),S&&(d["apollographql-client-version"]=S)}var _=p(p({},d),y.headers),w={http:y.http,options:y.fetchOptions,credentials:y.credentials,headers:_},O=Wi(l,a,$i,h,w),R=O.options,E=O.body;if(E.variables&&!u){var k=new Set(Object.keys(E.variables));N.visit(l.query,{Variable:function(L,Xt,x){x&&x.kind!=="VariableDefinition"&&k.delete(L.name.value)}}),k.size&&(E.variables=p({},E.variables),k.forEach(function(L){delete E.variables[L]}))}var A;if(!R.signal){var z=Gi(),Re=z.controller,Qe=z.signal;A=Re,A&&(R.signal=Qe)}var Mn=function(L){return L.kind==="OperationDefinition"&&L.operation==="mutation"};if(s&&!l.query.definitions.some(Mn)&&(R.method="GET"),R.method==="GET"){var Jt=Ji(v,E),Pn=Jt.newURI,Yt=Jt.parseError;if(Yt)return yr(Yt);v=Pn}else try{R.body=St(E,"Payload")}catch(L){return yr(L)}return new F(function(L){var Xt=n||W(function(){return fetch})||wr;return Xt(v,R).then(function(x){return l.setContext({response:x}),x}).then(xi(l)).then(function(x){return L.next(x),L.complete(),x}).catch(function(x){x.name!=="AbortError"&&(x.result&&x.result.errors&&x.result.data&&L.next(x.result),L.error(x))}),function(){A&&A.abort()}})})},Xi=function(r){B(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,Yi(t).request)||this;return n.options=t,n}return e}(Ce),an=Object.prototype,_r=an.toString,Zi=an.hasOwnProperty,Sr=Function.prototype.toString,Ot=new Map;function P(r,e){try{return Et(r,e)}finally{Ot.clear()}}function Et(r,e){if(r===e)return!0;var t=_r.call(r),n=_r.call(e);if(t!==n)return!1;switch(t){case"[object Array]":if(r.length!==e.length)return!1;case"[object Object]":{if(Er(r,e))return!0;var i=Or(r),a=Or(e),o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;++s)if(!Zi.call(e,i[s]))return!1;for(var s=0;s<o;++s){var c=i[s];if(!Et(r[c],e[c]))return!1}return!0}case"[object Error]":return r.name===e.name&&r.message===e.message;case"[object Number]":if(r!==r)return e!==e;case"[object Boolean]":case"[object Date]":return+r==+e;case"[object RegExp]":case"[object String]":return r==""+e;case"[object Map]":case"[object Set]":{if(r.size!==e.size)return!1;if(Er(r,e))return!0;for(var u=r.entries(),f=t==="[object Map]";;){var h=u.next();if(h.done)break;var l=h.value,v=l[0],y=l[1];if(!e.has(v)||f&&!Et(y,e.get(v)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":r=new Uint8Array(r),e=new Uint8Array(e);case"[object DataView]":{var d=r.byteLength;if(d===e.byteLength)for(;d--&&r[d]===e[d];);return d===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var m=Sr.call(r);return m!==Sr.call(e)?!1:!ra(m,ta)}}return!1}function Or(r){return Object.keys(r).filter(ea,r)}function ea(r){return this[r]!==void 0}var ta="{ [native code] }";function ra(r,e){var t=r.length-e.length;return t>=0&&r.indexOf(e,t)===t}function Er(r,e){var t=Ot.get(r);if(t){if(t.has(e))return!0}else Ot.set(r,t=new Set);return t.add(e),!1}var na=function(){return Object.create(null)},on=Array.prototype,ia=on.forEach,aa=on.slice,Fe=function(){function r(e,t){e===void 0&&(e=!0),t===void 0&&(t=na),this.weakness=e,this.makeData=t}return r.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},r.prototype.lookupArray=function(e){var t=this;return ia.call(e,function(n){return t=t.getChildTrie(n)}),t.data||(t.data=this.makeData(aa.call(e)))},r.prototype.getChildTrie=function(e){var t=this.weakness&&oa(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=t.get(e);return n||t.set(e,n=new r(this.weakness,this.makeData)),n},r}();function oa(r){switch(typeof r){case"object":if(r===null)break;case"function":return!0}return!1}var V=null,kr={},sa=1,ua=function(){return function(){function r(){this.id=["slot",sa++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return r.prototype.hasValue=function(){for(var e=V;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===kr)break;return e!==V&&(V.slots[this.id]=t),!0}return V&&(V.slots[this.id]=kr),!1},r.prototype.getValue=function(){if(this.hasValue())return V.slots[this.id]},r.prototype.withValue=function(e,t,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),s=V;V={parent:s,slots:o};try{return t.apply(i,n)}finally{V=s}},r.bind=function(e){var t=V;return function(){var n=V;try{return V=t,e.apply(this,arguments)}finally{V=n}}},r.noContext=function(e,t,n){if(V){var i=V;try{return V=null,e.apply(n,t)}finally{V=i}}else return e.apply(n,t)},r}()},et="@wry/context:Slot",tt=Array,Ge=tt[et]||function(){var r=ua();try{Object.defineProperty(tt,et,{value:tt[et]=r,enumerable:!1,writable:!1,configurable:!1})}finally{return r}}();Ge.bind;Ge.noContext;function ca(){}var fa=function(){function r(e,t){e===void 0&&(e=1/0),t===void 0&&(t=ca),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return r.prototype.has=function(e){return this.map.has(e)},r.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},r.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,i=t.newer;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t},r.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},r.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},r.prototype.delete=function(e){var t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1},r}(),He=new Ge,rt,la=Object.prototype.hasOwnProperty,Bt=(rt=Array.from,rt===void 0?function(r){var e=[];return r.forEach(function(t){return e.push(t)}),e}:rt);function Le(r){var e=r.unsubscribe;typeof e=="function"&&(r.unsubscribe=void 0,e())}var Se=[],ha=100;function he(r,e){if(!r)throw new Error(e||"assertion failure")}function pa(r,e){var t=r.length;return t>0&&t===e.length&&r[t-1]===e[t-1]}function sn(r){switch(r.length){case 0:throw new Error("unknown value");case 1:return r[0];case 2:throw r[1]}}function va(r){return r.slice(0)}var da=function(){function r(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++r.count}return r.prototype.peek=function(){if(this.value.length===1&&!H(this))return Dr(this),this.value[0]},r.prototype.recompute=function(e){return he(!this.recomputing,"already recomputing"),Dr(this),H(this)?ya(this,e):sn(this.value)},r.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,un(this),Le(this))},r.prototype.dispose=function(){var e=this;this.setDirty(),pn(this),Wt(this,function(t,n){t.setDirty(),vn(t,e)})},r.prototype.forget=function(){this.dispose()},r.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=Se.pop()||new Set),this.deps.add(e)},r.prototype.forgetDeps=function(){var e=this;this.deps&&(Bt(this.deps).forEach(function(t){return t.delete(e)}),this.deps.clear(),Se.push(this.deps),this.deps=null)},r.count=0,r}();function Dr(r){var e=He.getValue();if(e)return r.parents.add(e),e.childValues.has(r)||e.childValues.set(r,[]),H(r)?fn(e,r):ln(e,r),e}function ya(r,e){return pn(r),He.withValue(r,ma,[r,e]),ba(r,e)&&ga(r),sn(r.value)}function ma(r,e){r.recomputing=!0,r.value.length=0;try{r.value[0]=r.fn.apply(null,e)}catch(t){r.value[1]=t}r.recomputing=!1}function H(r){return r.dirty||!!(r.dirtyChildren&&r.dirtyChildren.size)}function ga(r){r.dirty=!1,!H(r)&&cn(r)}function un(r){Wt(r,fn)}function cn(r){Wt(r,ln)}function Wt(r,e){var t=r.parents.size;if(t)for(var n=Bt(r.parents),i=0;i<t;++i)e(n[i],r)}function fn(r,e){he(r.childValues.has(e)),he(H(e));var t=!H(r);if(!r.dirtyChildren)r.dirtyChildren=Se.pop()||new Set;else if(r.dirtyChildren.has(e))return;r.dirtyChildren.add(e),t&&un(r)}function ln(r,e){he(r.childValues.has(e)),he(!H(e));var t=r.childValues.get(e);t.length===0?r.childValues.set(e,va(e.value)):pa(t,e.value)||r.setDirty(),hn(r,e),!H(r)&&cn(r)}function hn(r,e){var t=r.dirtyChildren;t&&(t.delete(e),t.size===0&&(Se.length<ha&&Se.push(t),r.dirtyChildren=null))}function pn(r){r.childValues.size>0&&r.childValues.forEach(function(e,t){vn(r,t)}),r.forgetDeps(),he(r.dirtyChildren===null)}function vn(r,e){e.parents.delete(r),r.childValues.delete(e),hn(r,e)}function ba(r,e){if(typeof r.subscribe=="function")try{Le(r),r.unsubscribe=r.subscribe.apply(null,e)}catch{return r.setDirty(),!1}return!0}var wa={setDirty:!0,dispose:!0,forget:!0};function dn(r){var e=new Map,t=r&&r.subscribe;function n(i){var a=He.getValue();if(a){var o=e.get(i);o||e.set(i,o=new Set),a.dependOn(o),typeof t=="function"&&(Le(o),o.unsubscribe=t(i))}}return n.dirty=function(a,o){var s=e.get(a);if(s){var c=o&&la.call(wa,o)?o:"setDirty";Bt(s).forEach(function(u){return u[c]()}),e.delete(a),Le(s)}},n}function yn(){var r=new Fe(typeof WeakMap=="function");return function(){return r.lookupArray(arguments)}}yn();var nt=new Set;function Ne(r,e){e===void 0&&(e=Object.create(null));var t=new fa(e.max||Math.pow(2,16),function(u){return u.dispose()}),n=e.keyArgs,i=e.makeCacheKey||yn(),a=function(){var u=i.apply(null,n?n.apply(null,arguments):arguments);if(u===void 0)return r.apply(null,arguments);var f=t.get(u);f||(t.set(u,f=new da(r)),f.subscribe=e.subscribe,f.forget=function(){return t.delete(u)});var h=f.recompute(Array.prototype.slice.call(arguments));return t.set(u,f),nt.add(t),He.hasValue()||(nt.forEach(function(l){return l.clean()}),nt.clear()),h};Object.defineProperty(a,"size",{get:function(){return t.map.size},configurable:!1,enumerable:!1});function o(u){var f=t.get(u);f&&f.setDirty()}a.dirtyKey=o,a.dirty=function(){o(i.apply(null,arguments))};function s(u){var f=t.get(u);if(f)return f.peek()}a.peekKey=s,a.peek=function(){return s(i.apply(null,arguments))};function c(u){return t.delete(u)}return a.forgetKey=c,a.forget=function(){return c(i.apply(null,arguments))},a.makeCacheKey=i,a.getKey=n?function(){return i.apply(null,n.apply(null,arguments))}:i,Object.freeze(a)}var _a=function(){function r(){this.getFragmentDoc=Ne(Jn)}return r.prototype.batch=function(e){var t=this,n=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,i;return this.performTransaction(function(){return i=e.update(t)},n),i},r.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},r.prototype.transformDocument=function(e){return e},r.prototype.identify=function(e){},r.prototype.gc=function(){return[]},r.prototype.modify=function(e){return!1},r.prototype.transformForLink=function(e){return e},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(p(p({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(p(p({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},r.prototype.writeQuery=function(e){var t=e.id,n=e.data,i=ce(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:n}))},r.prototype.writeFragment=function(e){var t=e.id,n=e.data,i=e.fragment,a=e.fragmentName,o=ce(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,a),dataId:t,result:n}))},r.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var i=n.readQuery(e),a=t(i);return a==null?i:(n.writeQuery(p(p({},e),{data:a})),a)}})},r.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var i=n.readFragment(e),a=t(i);return a==null?i:(n.writeFragment(p(p({},e),{data:a})),a)}})},r}(),mn=function(){function r(e,t,n,i){this.message=e,this.path=t,this.query=n,this.variables=i}return r}(),M=Object.prototype.hasOwnProperty;function gn(r,e){var t=r.__typename,n=r.id,i=r._id;if(typeof t=="string"&&(e&&(e.keyObject=n!==void 0?{id:n}:i!==void 0?{_id:i}:void 0),n===void 0&&(n=i),n!==void 0))return"".concat(t,":").concat(typeof n=="number"||typeof n=="string"?n:JSON.stringify(n))}var bn={dataIdFromObject:gn,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Sa(r){return _e(bn,r)}function wn(r){var e=r.canonizeResults;return e===void 0?bn.canonizeResults:e}function Oa(r,e){return D(e)?r.get(e.__ref,"__typename"):e&&e.__typename}var _n=/^[_a-z][_0-9a-z]*/i;function J(r){var e=r.match(_n);return e?e[0]:r}function kt(r,e,t){return Q(e)?T(e)?e.every(function(n){return kt(r,n,t)}):r.selections.every(function(n){if(U(n)&&Be(n,t)){var i=ee(n);return M.call(e,i)&&(!n.selectionSet||kt(n.selectionSet,e[i],t))}return!0}):!1}function ae(r){return Q(r)&&!D(r)&&!T(r)}function Ea(){return new qe}var T=function(r){return Array.isArray(r)},Ve=Object.create(null),it=function(){return Ve},qr=Object.create(null),Oe=function(){function r(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,a){return bt(D(i)?n.get(i.__ref,a):i&&i[a])},this.canRead=function(i){return D(i)?n.has(i.__ref):typeof i=="object"},this.toReference=function(i,a){if(typeof i=="string")return se(i);if(D(i))return i;var o=n.policies.identify(i)[0];if(o){var s=se(o);return a&&n.merge(o,i),s}}}return r.prototype.toObject=function(){return p({},this.data)},r.prototype.has=function(e){return this.lookup(e,!0)!==void 0},r.prototype.get=function(e,t){if(this.group.depend(e,t),M.call(this.data,e)){var n=this.data[e];if(n&&M.call(n,t))return n[t]}if(t==="__typename"&&M.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof K)return this.parent.get(e,t)},r.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),M.call(this.data,e))return this.data[e];if(this instanceof K)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},r.prototype.merge=function(e,t){var n=this,i;D(e)&&(e=e.__ref),D(t)&&(t=t.__ref);var a=typeof e=="string"?this.lookup(i=e):e,o=typeof t=="string"?this.lookup(i=t):t;if(!!o){__DEV__?b(typeof i=="string","store.merge expects a string ID"):b(typeof i=="string",1);var s=new qe(Da).merge(a,o);if(this.data[i]=s,s!==a&&(delete this.refs[i],this.group.caching)){var c=Object.create(null);a||(c.__exists=1),Object.keys(o).forEach(function(u){if(!a||a[u]!==s[u]){c[u]=1;var f=J(u);f!==u&&!n.policies.hasKeyArgs(s.__typename,f)&&(c[f]=1),s[u]===void 0&&!(n instanceof K)&&delete s[u]}}),c.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[i]===s.__typename&&delete c.__typename,Object.keys(c).forEach(function(u){return n.group.dirty(i,u)})}}},r.prototype.modify=function(e,t){var n=this,i=this.lookup(e);if(i){var a=Object.create(null),o=!1,s=!0,c={DELETE:Ve,INVALIDATE:qr,isReference:D,toReference:this.toReference,canRead:this.canRead,readField:function(u,f){return n.policies.readField(typeof u=="string"?{fieldName:u,from:f||se(e)}:u,{store:n})}};if(Object.keys(i).forEach(function(u){var f=J(u),h=i[u];if(h!==void 0){var l=typeof t=="function"?t:t[u]||t[f];if(l){var v=l===it?Ve:l(bt(h),p(p({},c),{fieldName:f,storeFieldName:u,storage:n.getStorage(e,u)}));v===qr?n.group.dirty(e,u):(v===Ve&&(v=void 0),v!==h&&(a[u]=v,o=!0,h=v))}h!==void 0&&(s=!1)}}),o)return this.merge(e,a),s&&(this instanceof K?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},r.prototype.delete=function(e,t,n){var i,a=this.lookup(e);if(a){var o=this.getFieldValue(a,"__typename"),s=t&&n?this.policies.getStoreFieldName({typename:o,fieldName:t,args:n}):t;return this.modify(e,s?(i={},i[s]=it,i):it)}return!1},r.prototype.evict=function(e,t){var n=!1;return e.id&&(M.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof K&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},r.prototype.clear=function(){this.replace(null)},r.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach(function(i){M.call(e.policies.rootTypenamesById,i)||n.push(i)}),n.length&&(t.__META={extraRootIds:n.sort()}),t},r.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(a){e&&M.call(e,a)||t.delete(a)}),e){var n=e.__META,i=ce(e,["__META"]);Object.keys(i).forEach(function(a){t.merge(a,i[a])}),n&&n.extraRootIds.forEach(this.retain,this)}},r.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},r.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},r.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof K?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},r.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach(function(o){M.call(n,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete n[o])});var i=Object.keys(n);if(i.length){for(var a=this;a instanceof K;)a=a.parent;i.forEach(function(o){return a.delete(o)})}return i},r.prototype.findChildRefIds=function(e){if(!M.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var i=new Set([n]);i.forEach(function(a){D(a)&&(t[a.__ref]=!0),Q(a)&&Object.keys(a).forEach(function(o){var s=a[o];Q(s)&&i.add(s)})})}return this.refs[e]},r.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},r}(),Sn=function(){function r(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return r.prototype.resetCaching=function(){this.d=this.caching?dn():null,this.keyMaker=new Fe(re)},r.prototype.depend=function(e,t){if(this.d){this.d(at(e,t));var n=J(t);n!==t&&this.d(at(e,n)),this.parent&&this.parent.depend(e,t)}},r.prototype.dirty=function(e,t){this.d&&this.d.dirty(at(e,t),t==="__exists"?"forget":"setDirty")},r}();function at(r,e){return e+"#"+r}function Cr(r,e){be(r)&&r.group.depend(e,"__exists")}(function(r){var e=function(t){B(n,t);function n(i){var a=i.policies,o=i.resultCaching,s=o===void 0?!0:o,c=i.seed,u=t.call(this,a,new Sn(s))||this;return u.stump=new ka(u),u.storageTrie=new Fe(re),c&&u.replace(c),u}return n.prototype.addLayer=function(i,a){return this.stump.addLayer(i,a)},n.prototype.removeLayer=function(){return this},n.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},n}(r);r.Root=e})(Oe||(Oe={}));var K=function(r){B(e,r);function e(t,n,i,a){var o=r.call(this,n.policies,a)||this;return o.id=t,o.parent=n,o.replay=i,o.group=a,i(o),o}return e.prototype.addLayer=function(t,n){return new e(t,this,n,this.group)},e.prototype.removeLayer=function(t){var n=this,i=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var o=n.data[a],s=i.lookup(a);s?o?o!==s&&Object.keys(o).forEach(function(c){P(o[c],s[c])||n.group.dirty(a,c)}):(n.group.dirty(a,"__exists"),Object.keys(s).forEach(function(c){n.group.dirty(a,c)})):n.delete(a)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return p(p({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return M.call(this.data,t)?p(p({},n),r.prototype.findChildRefIds.call(this,t)):n},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(Oe),ka=function(r){B(e,r);function e(t){return r.call(this,"EntityStore.Stump",t,function(){},new Sn(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},e}(K);function Da(r,e,t){var n=r[t],i=e[t];return P(n,i)?n:i}function be(r){return!!(r instanceof Oe&&r.group.caching)}function qa(r){return Q(r)?T(r)?r.slice(0):p({__proto__:Object.getPrototypeOf(r)},r):r}var Dt=function(){function r(){this.known=new(Qi?WeakSet:Set),this.pool=new Fe(re),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return r.prototype.isKnown=function(e){return Q(e)&&this.known.has(e)},r.prototype.pass=function(e){if(Q(e)){var t=qa(e);return this.passes.set(t,e),t}return e},r.prototype.admit=function(e){var t=this;if(Q(e)){var n=this.passes.get(e);if(n)return n;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:{if(this.known.has(e))return e;var a=e.map(this.admit,this),o=this.pool.lookupArray(a);return o.array||(this.known.add(o.array=a),__DEV__&&Object.freeze(a)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var s=Object.getPrototypeOf(e),c=[s],u=this.sortedKeys(e);c.push(u.json);var f=c.length;u.sorted.forEach(function(v){c.push(t.admit(e[v]))});var o=this.pool.lookupArray(c);if(!o.object){var h=o.object=Object.create(s);this.known.add(h),u.sorted.forEach(function(v,y){h[v]=c[f+y]}),__DEV__&&Object.freeze(h)}return o.object}}}return e},r.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var i=JSON.stringify(t);(n.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,n.keys={sorted:t,json:i})}return n.keys},r}(),Z=Object.assign(function(r){if(Q(r)){qt===void 0&&Fr();var e=qt.admit(r),t=Ct.get(e);return t===void 0&&Ct.set(e,t=JSON.stringify(e)),t}return JSON.stringify(r)},{reset:Fr}),qt,Ct;function Fr(){qt=new Dt,Ct=new(re?WeakMap:Map)}function Rr(r){return[r.selectionSet,r.objectOrReference,r.context,r.context.canonizeResults]}var Ca=function(){function r(e){var t=this;this.knownResults=new(re?WeakMap:Map),this.config=_e(e,{addTypename:e.addTypename!==!1,canonizeResults:wn(e)}),this.canon=e.canon||new Dt,this.executeSelectionSet=Ne(function(n){var i,a=n.context.canonizeResults,o=Rr(n);o[3]=!a;var s=(i=t.executeSelectionSet).peek.apply(i,o);return s?a?p(p({},s),{result:t.canon.admit(s.result)}):s:(Cr(n.context.store,n.enclosingRef.__ref),t.execSelectionSetImpl(n))},{max:this.config.resultCacheMaxSize,keyArgs:Rr,makeCacheKey:function(n,i,a,o){if(be(a.store))return a.store.makeCacheKey(n,D(i)?i.__ref:i,a.varString,o)}}),this.executeSubSelectedArray=Ne(function(n){return Cr(n.context.store,n.enclosingRef.__ref),t.execSubSelectedArrayImpl(n)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(n){var i=n.field,a=n.array,o=n.context;if(be(o.store))return o.store.makeCacheKey(i,a,o.varString)}})}return r.prototype.resetCanon=function(){this.canon=new Dt},r.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,i=e.rootId,a=i===void 0?"ROOT_QUERY":i,o=e.variables,s=e.returnPartialData,c=s===void 0?!0:s,u=e.canonizeResults,f=u===void 0?this.config.canonizeResults:u,h=this.config.cache.policies;o=p(p({},At(Gr(n))),o);var l=se(a),v=new qe,y=this.executeSelectionSet({selectionSet:Vt(n).selectionSet,objectOrReference:l,enclosingRef:l,context:{store:t,query:n,policies:h,variables:o,varString:Z(o),canonizeResults:f,fragmentMap:We(Ke(n)),merge:function(m,g){return v.merge(m,g)}}}),d;if(y.missing&&(d=[new mn(Fa(y.missing),y.missing,n,o)],!c))throw d[0];return{result:y.result,complete:!d,missing:d}},r.prototype.isFresh=function(e,t,n,i){if(be(i.store)&&this.knownResults.get(e)===n){var a=this.executeSelectionSet.peek(n,t,i,this.canon.isKnown(e));if(a&&e===a.result)return!0}return!1},r.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,i=e.objectOrReference,a=e.enclosingRef,o=e.context;if(D(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var s=o.variables,c=o.policies,u=o.store,f=u.getFieldValue(i,"__typename"),h={},l;this.config.addTypename&&typeof f=="string"&&!c.rootIdsByTypename[f]&&(h={__typename:f});function v(g,S){var _;return g.missing&&(l=o.merge(l,(_={},_[S]=g.missing,_))),g.result}var y=new Set(n.selections);y.forEach(function(g){var S,_;if(!!Be(g,s))if(U(g)){var w=c.readField({fieldName:g.name.value,field:g,variables:o.variables,from:i},o),O=ee(g);w===void 0?xt.added(g)||(l=o.merge(l,(S={},S[O]="Can't find field '".concat(g.name.value,"' on ").concat(D(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),S))):T(w)?w=v(t.executeSubSelectedArray({field:g,array:w,enclosingRef:a,context:o}),O):g.selectionSet?w!=null&&(w=v(t.executeSelectionSet({selectionSet:g.selectionSet,objectOrReference:w,enclosingRef:D(w)?w:a,context:o}),O)):o.canonizeResults&&(w=t.canon.pass(w)),w!==void 0&&(h=o.merge(h,(_={},_[O]=w,_)))}else{var R=Pt(g,o.fragmentMap);R&&c.fragmentMatches(R,f)&&R.selectionSet.selections.forEach(y.add,y)}});var d={result:h,missing:l},m=o.canonizeResults?this.canon.admit(d):bt(d);return m.result&&this.knownResults.set(m.result,n),m},r.prototype.execSubSelectedArrayImpl=function(e){var t=this,n=e.field,i=e.array,a=e.enclosingRef,o=e.context,s;function c(u,f){var h;return u.missing&&(s=o.merge(s,(h={},h[f]=u.missing,h))),u.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map(function(u,f){return u===null?null:T(u)?c(t.executeSubSelectedArray({field:n,array:u,enclosingRef:a,context:o}),f):n.selectionSet?c(t.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:u,enclosingRef:D(u)?u:a,context:o}),f):(__DEV__&&Ra(o.store,n,u),u)}),{result:o.canonizeResults?this.canon.admit(i):i,missing:s}},r}();function Fa(r){try{JSON.stringify(r,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function Ra(r,e,t){if(!e.selectionSet){var n=new Set([t]);n.forEach(function(i){Q(i)&&(__DEV__?b(!D(i),"Missing selection set for object of type ".concat(Oa(r,i)," returned for query field ").concat(e.name.value)):b(!D(i),5),Object.values(i).forEach(n.add,n))})}}var Ut=new Ge,Qr=new WeakMap;function we(r){var e=Qr.get(r);return e||Qr.set(r,e={vars:new Set,dep:dn()}),e}function Tr(r){we(r).vars.forEach(function(e){return e.forgetCache(r)})}function Qa(r){we(r).vars.forEach(function(e){return e.attachCache(r)})}function Ta(r){var e=new Set,t=new Set,n=function(a){if(arguments.length>0){if(r!==a){r=a,e.forEach(function(c){we(c).dep.dirty(n),Ma(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(r)})}}else{var s=Ut.getValue();s&&(i(s),we(s).dep(n))}return r};n.onNextChange=function(a){return t.add(a),function(){t.delete(a)}};var i=n.attachCache=function(a){return e.add(a),we(a).vars.add(n),n};return n.forgetCache=function(a){return e.delete(a)},n}function Ma(r){r.broadcastWatches&&r.broadcastWatches()}var Mr=Object.create(null);function Kt(r){var e=JSON.stringify(r);return Mr[e]||(Mr[e]=Object.create(null))}function Pr(r){var e=Kt(r);return e.keyFieldsFn||(e.keyFieldsFn=function(t,n){var i=function(o,s){return n.readField(s,o)},a=n.keyObject=Gt(r,function(o){var s=ue(n.storeObject,o,i);return s===void 0&&t!==n.storeObject&&M.call(t,o[0])&&(s=ue(t,o,En)),__DEV__?b(s!==void 0,"Missing field '".concat(o.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):b(s!==void 0,2),s});return"".concat(n.typename,":").concat(JSON.stringify(a))})}function jr(r){var e=Kt(r);return e.keyArgsFn||(e.keyArgsFn=function(t,n){var i=n.field,a=n.variables,o=n.fieldName,s=Gt(r,function(u){var f=u[0],h=f.charAt(0);if(h==="@"){if(i&&te(i.directives)){var l=f.slice(1),v=i.directives.find(function(g){return g.name.value===l}),y=v&&Ue(v,a);return y&&ue(y,u.slice(1))}return}if(h==="$"){var d=f.slice(1);if(a&&M.call(a,d)){var m=u.slice(0);return m[0]=d,ue(a,m)}return}if(t)return ue(t,u)}),c=JSON.stringify(s);return(t||c!=="{}")&&(o+=":"+c),o})}function Gt(r,e){var t=new qe;return On(r).reduce(function(n,i){var a,o=e(i);if(o!==void 0){for(var s=i.length-1;s>=0;--s)o=(a={},a[i[s]]=o,a);n=t.merge(n,o)}return n},Object.create(null))}function On(r){var e=Kt(r);if(!e.paths){var t=e.paths=[],n=[];r.forEach(function(i,a){T(i)?(On(i).forEach(function(o){return t.push(n.concat(o))}),n.length=0):(n.push(i),T(r[a+1])||(t.push(n.slice(0)),n.length=0))})}return e.paths}function En(r,e){return r[e]}function ue(r,e,t){return t=t||En,kn(e.reduce(function n(i,a){return T(i)?i.map(function(o){return n(o,a)}):i&&t(i,a)},r))}function kn(r){return Q(r)?T(r)?r.map(kn):Gt(Object.keys(r).sort(),function(e){return ue(r,e)}):r}jt.setStringify(Z);function Ft(r){return r.args!==void 0?r.args:r.field?Ue(r.field,r.variables):null}var Pa=function(){},Vr=function(r,e){return e.fieldName},Ar=function(r,e,t){var n=t.mergeObjects;return n(r,e)},Ir=function(r,e){return e},ja=function(){function r(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=p({dataIdFromObject:gn},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return r.prototype.identify=function(e,t){var n,i=this,a=t&&(t.typename||((n=t.storeObject)===null||n===void 0?void 0:n.__typename))||e.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o=t&&t.storeObject||e,s=p(p({},t),{typename:a,storeObject:o,readField:t&&t.readField||function(){var l=Ht(arguments,o);return i.readField(l,{store:i.cache.data,variables:l.variables})}}),c,u=a&&this.getTypePolicy(a),f=u&&u.keyFn||this.config.dataIdFromObject;f;){var h=f(e,s);if(T(h))f=Pr(h);else{c=h;break}}return c=c?String(c):void 0,s.keyObject?[c,s.keyObject]:[c]},r.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(n){var i=e[n],a=i.queryType,o=i.mutationType,s=i.subscriptionType,c=ce(i,["queryType","mutationType","subscriptionType"]);a&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),s&&t.setRootTypename("Subscription",n),M.call(t.toBeAdded,n)?t.toBeAdded[n].push(c):t.toBeAdded[n]=[c]})},r.prototype.updateTypePolicy=function(e,t){var n=this,i=this.getTypePolicy(e),a=t.keyFields,o=t.fields;function s(c,u){c.merge=typeof u=="function"?u:u===!0?Ar:u===!1?Ir:c.merge}s(i,t.merge),i.keyFn=a===!1?Pa:T(a)?Pr(a):typeof a=="function"?a:i.keyFn,o&&Object.keys(o).forEach(function(c){var u=n.getFieldPolicy(e,c,!0),f=o[c];if(typeof f=="function")u.read=f;else{var h=f.keyArgs,l=f.read,v=f.merge;u.keyFn=h===!1?Vr:T(h)?jr(h):typeof h=="function"?h:u.keyFn,typeof l=="function"&&(u.read=l),s(u,v)}u.read&&u.merge&&(u.keyFn=u.keyFn||Vr)})},r.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var n="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[n];t!==i&&(__DEV__?b(!i||i===e,"Cannot change root ".concat(e," __typename more than once")):b(!i||i===e,3),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},r.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(n){t.getSupertypeSet(n,!0),e[n].forEach(function(i){t.getSupertypeSet(i,!0).add(n);var a=i.match(_n);(!a||a[0]!==i)&&t.fuzzySubtypes.set(i,new RegExp(i))})})},r.prototype.getTypePolicy=function(e){var t=this;if(!M.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var i=this.supertypeMap.get(e);i&&i.size&&i.forEach(function(o){var s=t.getTypePolicy(o),c=s.fields,u=ce(s,["fields"]);Object.assign(n,u),Object.assign(n.fields,c)})}var a=this.toBeAdded[e];return a&&a.length&&a.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},r.prototype.getFieldPolicy=function(e,t,n){if(e){var i=this.getTypePolicy(e).fields;return i[t]||n&&(i[t]=Object.create(null))}},r.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},r.prototype.fragmentMatches=function(e,t,n,i){var a=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var s=this.getSupertypeSet(t,!0),c=[s],u=function(y){var d=a.getSupertypeSet(y,!1);d&&d.size&&c.indexOf(d)<0&&c.push(d)},f=!!(n&&this.fuzzySubtypes.size),h=!1,l=0;l<c.length;++l){var v=c[l];if(v.has(o))return s.has(o)||(h&&__DEV__&&b.warn("Inferring subtype ".concat(t," of supertype ").concat(o)),s.add(o)),!0;v.forEach(u),f&&l===c.length-1&&kt(e.selectionSet,n,i)&&(f=!1,h=!0,this.fuzzySubtypes.forEach(function(y,d){var m=t.match(y);m&&m[0]===t&&u(d)}))}return!1},r.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!!(n&&n.keyFn)},r.prototype.getStoreFieldName=function(e){var t=e.typename,n=e.fieldName,i=this.getFieldPolicy(t,n,!1),a,o=i&&i.keyFn;if(o&&t)for(var s={typename:t,fieldName:n,field:e.field||null,variables:e.variables},c=Ft(e);o;){var u=o(c,s);if(T(u))o=jr(u);else{a=u||n;break}}return a===void 0&&(a=e.field?si(e.field,e.variables):jt(n,Ft(e))),a===!1?n:n===J(a)?a:n+":"+a},r.prototype.readField=function(e,t){var n=e.from;if(!!n){var i=e.field||e.fieldName;if(!!i){if(e.typename===void 0){var a=t.store.getFieldValue(n,"__typename");a&&(e.typename=a)}var o=this.getStoreFieldName(e),s=J(o),c=t.store.getFieldValue(n,o),u=this.getFieldPolicy(e.typename,s,!1),f=u&&u.read;if(f){var h=xr(this,n,e,t,t.store.getStorage(D(n)?n.__ref:n,o));return Ut.withValue(this.cache,f,[c,h])}return c}}},r.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},r.prototype.getMergeFunction=function(e,t,n){var i=this.getFieldPolicy(e,t,!1),a=i&&i.merge;return!a&&n&&(i=this.getTypePolicy(n),a=i&&i.merge),a},r.prototype.runMergeFunction=function(e,t,n,i,a){var o=n.field,s=n.typename,c=n.merge;return c===Ar?Dn(i.store)(e,t):c===Ir?t:(i.overwrite&&(e=void 0),c(e,t,xr(this,void 0,{typename:s,fieldName:o.name.value,field:o,variables:i.variables},i,a||Object.create(null))))},r}();function xr(r,e,t,n,i){var a=r.getStoreFieldName(t),o=J(a),s=t.variables||n.variables,c=n.store,u=c.toReference,f=c.canRead;return{args:Ft(t),field:t.field||null,fieldName:o,storeFieldName:a,variables:s,isReference:D,toReference:u,storage:i,cache:r.cache,canRead:f,readField:function(){return r.readField(Ht(arguments,e,n),n)},mergeObjects:Dn(n.store)}}function Ht(r,e,t){var n=r[0],i=r[1],a=r.length,o;return typeof n=="string"?o={fieldName:n,from:a>1?i:e}:(o=p({},n),M.call(o,"from")||(o.from=e)),__DEV__&&o.from===void 0&&__DEV__&&b.warn("Undefined 'from' passed to readField with arguments ".concat(Mi(Array.from(r)))),o.variables===void 0&&(o.variables=t),o}function Dn(r){return function(t,n){if(T(t)||T(n))throw __DEV__?new q("Cannot automatically merge arrays"):new q(4);if(Q(t)&&Q(n)){var i=r.getFieldValue(t,"__typename"),a=r.getFieldValue(n,"__typename"),o=i&&a&&i!==a;if(o)return n;if(D(t)&&ae(n))return r.merge(t.__ref,n),t;if(ae(t)&&D(n))return r.merge(t,n.__ref),n;if(ae(t)&&ae(n))return p(p({},t),n)}return n}}function ot(r,e,t){var n="".concat(e).concat(t),i=r.flavors.get(n);return i||r.flavors.set(n,i=r.clientOnly===e&&r.deferred===t?r:p(p({},r),{clientOnly:e,deferred:t})),i}var Va=function(){function r(e,t){this.cache=e,this.reader=t}return r.prototype.writeToStore=function(e,t){var n=this,i=t.query,a=t.result,o=t.dataId,s=t.variables,c=t.overwrite,u=De(i),f=Ea();s=p(p({},At(u)),s);var h={store:e,written:Object.create(null),merge:function(v,y){return f.merge(v,y)},variables:s,varString:Z(s),fragmentMap:We(Ke(i)),overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},l=this.processSelectionSet({result:a||Object.create(null),dataId:o,selectionSet:u.selectionSet,mergeTree:{map:new Map},context:h});if(!D(l))throw __DEV__?new q("Could not identify object ".concat(JSON.stringify(a))):new q(6);return h.incomingById.forEach(function(v,y){var d=v.storeObject,m=v.mergeTree,g=v.fieldNodeSet,S=se(y);if(m&&m.map.size){var _=n.applyMerges(m,S,d,h);if(D(_))return;d=_}if(__DEV__&&!h.overwrite){var w=Object.create(null);g.forEach(function(E){E.selectionSet&&(w[E.name.value]=!0)});var O=function(E){return w[J(E)]===!0},R=function(E){var k=m&&m.map.get(E);return Boolean(k&&k.info&&k.info.merge)};Object.keys(d).forEach(function(E){O(E)&&!R(E)&&Aa(S,d,E,h.store)})}e.merge(y,d)}),e.retain(l.__ref),l},r.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,i=e.result,a=e.selectionSet,o=e.context,s=e.mergeTree,c=this.cache.policies,u=Object.create(null),f=n&&c.rootTypenamesById[n]||vt(i,a,o.fragmentMap)||n&&o.store.get(n,"__typename");typeof f=="string"&&(u.__typename=f);var h=function(){var _=Ht(arguments,u,o.variables);if(D(_.from)){var w=o.incomingById.get(_.from.__ref);if(w){var O=c.readField(p(p({},_),{from:w.storeObject}),o);if(O!==void 0)return O}}return c.readField(_,o)},l=new Set;this.flattenFields(a,i,o,f).forEach(function(_,w){var O,R=ee(w),E=i[R];if(l.add(w),E!==void 0){var k=c.getStoreFieldName({typename:f,fieldName:w.name.value,field:w,variables:_.variables}),A=Lr(s,k),z=t.processFieldValue(E,w,w.selectionSet?ot(_,!1,!1):_,A),Re=void 0;w.selectionSet&&(D(z)||ae(z))&&(Re=h("__typename",z));var Qe=c.getMergeFunction(f,w.name.value,Re);Qe?A.info={field:w,typename:f,merge:Qe}:Nr(s,k),u=_.merge(u,(O={},O[k]=z,O))}else __DEV__&&!_.clientOnly&&!_.deferred&&!xt.added(w)&&!c.getReadFunction(f,w.name.value)&&__DEV__&&b.error("Missing field '".concat(ee(w),"' while writing result ").concat(JSON.stringify(i,null,2)).substring(0,1e3))});try{var v=c.identify(i,{typename:f,selectionSet:a,fragmentMap:o.fragmentMap,storeObject:u,readField:h}),y=v[0],d=v[1];n=n||y,d&&(u=o.merge(u,d))}catch(_){if(!n)throw _}if(typeof n=="string"){var m=se(n),g=o.written[n]||(o.written[n]=[]);if(g.indexOf(a)>=0||(g.push(a),this.reader&&this.reader.isFresh(i,m,a,o)))return m;var S=o.incomingById.get(n);return S?(S.storeObject=o.merge(S.storeObject,u),S.mergeTree=Rt(S.mergeTree,s),l.forEach(function(_){return S.fieldNodeSet.add(_)})):o.incomingById.set(n,{storeObject:u,mergeTree:ze(s)?void 0:s,fieldNodeSet:l}),m}return u},r.prototype.processFieldValue=function(e,t,n,i){var a=this;return!t.selectionSet||e===null?__DEV__?rn(e):e:T(e)?e.map(function(o,s){var c=a.processFieldValue(o,t,n,Lr(i,s));return Nr(i,s),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:i})},r.prototype.flattenFields=function(e,t,n,i){i===void 0&&(i=vt(t,e,n.fragmentMap));var a=new Map,o=this.cache.policies,s=new Fe(!1);return function c(u,f){var h=s.lookup(u,f.clientOnly,f.deferred);h.visited||(h.visited=!0,u.selections.forEach(function(l){if(!!Be(l,n.variables)){var v=f.clientOnly,y=f.deferred;if(!(v&&y)&&te(l.directives)&&l.directives.forEach(function(g){var S=g.name.value;if(S==="client"&&(v=!0),S==="defer"){var _=Ue(g,n.variables);(!_||_.if!==!1)&&(y=!0)}}),U(l)){var d=a.get(l);d&&(v=v&&d.clientOnly,y=y&&d.deferred),a.set(l,ot(n,v,y))}else{var m=Pt(l,n.fragmentMap);m&&o.fragmentMatches(m,i,t,n.variables)&&c(m.selectionSet,ot(n,v,y))}}}))}(e,n),a},r.prototype.applyMerges=function(e,t,n,i,a){var o,s=this;if(e.map.size&&!D(n)){var c=!T(n)&&(D(t)||ae(t))?t:void 0,u=n;c&&!a&&(a=[D(c)?c.__ref:c]);var f,h=function(l,v){return T(l)?typeof v=="number"?l[v]:void 0:i.store.getFieldValue(l,String(v))};e.map.forEach(function(l,v){var y=h(c,v),d=h(u,v);if(d!==void 0){a&&a.push(v);var m=s.applyMerges(l,y,d,i,a);m!==d&&(f=f||new Map,f.set(v,m)),a&&b(a.pop()===v)}}),f&&(n=T(u)?u.slice(0):p({},u),f.forEach(function(l,v){n[v]=l}))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,i,a&&(o=i.store).getStorage.apply(o,a)):n},r}(),qn=[];function Lr(r,e){var t=r.map;return t.has(e)||t.set(e,qn.pop()||{map:new Map}),t.get(e)}function Rt(r,e){if(r===e||!e||ze(e))return r;if(!r||ze(r))return e;var t=r.info&&e.info?p(p({},r.info),e.info):r.info||e.info,n=r.map.size&&e.map.size,i=n?new Map:r.map.size?r.map:e.map,a={info:t,map:i};if(n){var o=new Set(e.map.keys());r.map.forEach(function(s,c){a.map.set(c,Rt(s,e.map.get(c))),o.delete(c)}),o.forEach(function(s){a.map.set(s,Rt(e.map.get(s),r.map.get(s)))})}return a}function ze(r){return!r||!(r.info||r.map.size)}function Nr(r,e){var t=r.map,n=t.get(e);n&&ze(n)&&(qn.push(n),t.delete(e))}var zr=new Set;function Aa(r,e,t,n){var i=function(h){var l=n.getFieldValue(h,t);return typeof l=="object"&&l},a=i(r);if(!!a){var o=i(e);if(!!o&&!D(a)&&!P(a,o)&&!Object.keys(a).every(function(h){return n.getFieldValue(o,h)!==void 0})){var s=n.getFieldValue(r,"__typename")||n.getFieldValue(e,"__typename"),c=J(t),u="".concat(s,".").concat(c);if(!zr.has(u)){zr.add(u);var f=[];!T(a)&&!T(o)&&[a,o].forEach(function(h){var l=n.getFieldValue(h,"__typename");typeof l=="string"&&!f.includes(l)&&f.push(l)}),__DEV__&&b.warn("Cache data may be lost when replacing the ".concat(c," field of a ").concat(s,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(f.length?"either ensure all objects of type "+f.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(u,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(o).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var Ia=function(r){B(e,r);function e(t){t===void 0&&(t={});var n=r.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=Ta,n.txCount=0,n.config=Sa(t),n.addTypename=!!n.config.addTypename,n.policies=new ja({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return e.prototype.init=function(){var t=this.data=new Oe.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var n=this,i=this.storeReader;this.storeWriter=new Va(this,this.storeReader=new Ca({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:wn(this.config),canon:t?void 0:i&&i.canon})),this.maybeBroadcastWatch=Ne(function(a,o){return n.broadcastWatch(a,o)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var o=a.optimistic?n.optimisticData:n.data;if(be(o)){var s=a.optimistic,c=a.rootId,u=a.variables;return o.makeCacheKey(a.query,a.callback,Z({optimistic:s,rootId:c,variables:u}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var n=t.returnPartialData,i=n===void 0?!1:n;try{return this.storeReader.diffQueryAgainstStore(p(p({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(a){if(a instanceof mn)return null;throw a}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(M.call(t,"id")&&!t.id)return!1;var n=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,n.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(p(p({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var n=this;return this.watches.size||Qa(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){n.watches.delete(t)&&!n.watches.size&&Tr(n),n.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){Z.reset();var n=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),n},e.prototype.retain=function(t,n){return(n?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,n){return(n?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(D(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(n){__DEV__&&b.warn(n)}},e.prototype.evict=function(t){if(!t.id){if(M.call(t,"id"))return!1;t=p(p({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var n=this;return this.init(),Z.reset(),t&&t.discardWatches?(this.watches.forEach(function(i){return n.maybeBroadcastWatch.forget(i)}),this.watches.clear(),Tr(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var n=this.optimisticData.removeLayer(t);n!==this.optimisticData&&(this.optimisticData=n,this.broadcastWatches())},e.prototype.batch=function(t){var n=this,i=t.update,a=t.optimistic,o=a===void 0?!0:a,s=t.removeOptimistic,c=t.onWatchUpdated,u,f=function(l){var v=n,y=v.data,d=v.optimisticData;++n.txCount,l&&(n.data=n.optimisticData=l);try{return u=i(n)}finally{--n.txCount,n.data=y,n.optimisticData=d}},h=new Set;return c&&!this.txCount&&this.broadcastWatches(p(p({},t),{onWatchUpdated:function(l){return h.add(l),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,f):o===!1?f(this.data):f(),typeof s=="string"&&(this.optimisticData=this.optimisticData.removeLayer(s)),c&&h.size?(this.broadcastWatches(p(p({},t),{onWatchUpdated:function(l,v){var y=c.call(this,l,v);return y!==!1&&h.delete(l),y}})),h.size&&h.forEach(function(l){return n.maybeBroadcastWatch.dirty(l)})):this.broadcastWatches(t),u},e.prototype.performTransaction=function(t,n){return this.batch({update:t,optimistic:n||n!==null})},e.prototype.transformDocument=function(t){if(this.addTypename){var n=this.typenameDocumentCache.get(t);return n||(n=xt(t),this.typenameDocumentCache.set(t,n),this.typenameDocumentCache.set(n,n)),n}return t},e.prototype.broadcastWatches=function(t){var n=this;this.txCount||this.watches.forEach(function(i){return n.maybeBroadcastWatch(i,t)})},e.prototype.broadcastWatch=function(t,n){var i=t.lastDiff,a=this.diff(t);n&&(t.optimistic&&typeof n.optimistic=="string"&&(a.fromOptimisticTransaction=!0),n.onWatchUpdated&&n.onWatchUpdated.call(this,t,a,i)===!1)||(!i||!P(i.result,a.result))&&t.callback(t.lastDiff=a,i)},e}(_a);function xa(r){return r.hasOwnProperty("graphQLErrors")}var La=function(r){var e="";if(te(r.graphQLErrors)||te(r.clientErrors)){var t=(r.graphQLErrors||[]).concat(r.clientErrors||[]);t.forEach(function(n){var i=n?n.message:"Error message not found.";e+="".concat(i,`
`)})}return r.networkError&&(e+="".concat(r.networkError.message,`
`)),e=e.replace(/\n$/,""),e},ne=function(r){B(e,r);function e(t){var n=t.graphQLErrors,i=t.clientErrors,a=t.networkError,o=t.errorMessage,s=t.extraInfo,c=r.call(this,o)||this;return c.graphQLErrors=n||[],c.clientErrors=i||[],c.networkError=a||null,c.message=o||La(c),c.extraInfo=s,c.__proto__=e.prototype,c}return e}(Error),C;(function(r){r[r.loading=1]="loading",r[r.setVariables=2]="setVariables",r[r.fetchMore=3]="fetchMore",r[r.refetch=4]="refetch",r[r.poll=6]="poll",r[r.ready=7]="ready",r[r.error=8]="error"})(C||(C={}));function Ee(r){return r?r<7:!1}var Na=Object.assign,za=Object.hasOwnProperty,$r=!1,Qt=function(r){B(e,r);function e(t){var n=t.queryManager,i=t.queryInfo,a=t.options,o=r.call(this,function(c){try{var u=c._subscription._observer;u&&!u.error&&(u.error=$a)}catch{}var f=!o.observers.size;o.observers.add(c);var h=o.last;return h&&h.error?c.error&&c.error(h.error):h&&h.result&&c.next&&c.next(h.result),f&&o.reobserve().catch(function(){}),function(){o.observers.delete(c)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=a,o.queryId=i.queryId||n.generateQueryId();var s=De(a.query);return o.queryName=s&&s.name&&s.name.value,o.initialFetchPolicy=a.fetchPolicy||"cache-first",o.queryManager=n,o.queryInfo=i,o}return Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(n,i){var a={next:function(s){n(s),t.observers.delete(a),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=t.subscribe(a)})},e.prototype.getCurrentResult=function(t){t===void 0&&(t=!0);var n=this.getLastResult(!0),i=this.queryInfo.networkStatus||n&&n.networkStatus||C.ready,a=p(p({},n),{loading:Ee(i),networkStatus:i}),o=this.options.fetchPolicy,s=o===void 0?"cache-first":o;if(!(s==="network-only"||s==="no-cache"||s==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(a.data=c.result),P(a.data,{})&&(a.data=void 0),c.complete?(delete a.partial,c.complete&&a.networkStatus===C.loading&&(s==="cache-first"||s==="cache-only")&&(a.networkStatus=C.ready,a.loading=!1)):a.partial=!0,__DEV__&&!c.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&Cn(c.missing)}return t&&this.updateLastResult(a),a},e.prototype.isDifferentFromLastResult=function(t){return!this.last||!P(this.last.result,t)},e.prototype.getLast=function(t,n){var i=this.last;if(i&&i[t]&&(!n||P(i.variables,this.variables)))return i[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var n,i={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?i.fetchPolicy=a:a==="no-cache"?i.fetchPolicy="no-cache":i.fetchPolicy="network-only",__DEV__&&t&&za.call(t,"variables")){var o=Gr(this.options.query),s=o.variableDefinitions;(!s||!s.some(function(c){return c.variable.name.value==="variables"}))&&__DEV__&&b.warn("Called refetch(".concat(JSON.stringify(t),") for query ").concat(((n=o.name)===null||n===void 0?void 0:n.value)||JSON.stringify(o),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return t&&!P(this.options.variables,t)&&(i.variables=this.options.variables=p(p({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(i,C.refetch)},e.prototype.fetchMore=function(t){var n=this,i=p(p({},t.query?t:p(p(p({},this.options),t),{variables:p(p({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId();return i.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=C.fetchMore,this.observe()),this.queryManager.fetchQuery(a,i,C.fetchMore).then(function(o){var s=o.data,c=t.updateQuery;return c?(__DEV__&&!$r&&(__DEV__&&b.warn(`The updateQuery callback for fetchMore is deprecated, and will be removed
in the next major version of Apollo Client.

Please convert updateQuery functions to field policies with appropriate
read and merge functions, or use/adapt a helper function (such as
concatPagination, offsetLimitPagination, or relayStylePagination) from
@apollo/client/utilities.

The field policy system handles pagination more effectively than a
hand-written updateQuery function, and you only need to define the policy
once, rather than every time you call fetchMore.`),$r=!0),n.updateQuery(function(u){return c(u,{fetchMoreResult:s,variables:i.variables})})):n.queryManager.cache.writeQuery({query:i.query,variables:i.variables,data:s}),o}).finally(function(){n.queryManager.stopQuery(a),n.reobserve()})},e.prototype.subscribeToMore=function(t){var n=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(a){var o=t.updateQuery;o&&n.updateQuery(function(s,c){var u=c.variables;return o(s,{subscriptionData:a,variables:u})})},error:function(a){if(t.onError){t.onError(a);return}__DEV__&&b.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.setVariables=function(t){return P(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.initialFetchPolicy,variables:t},C.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var n=this.queryManager,i=n.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=t(i,{variables:this.variables});a&&(n.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),n.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.fetch=function(t,n){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,t,n)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var n=this,i=n.pollingInfo,a=n.options.pollInterval;if(!a){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===a)){__DEV__?b(a,"Attempted to start a polling query without a polling interval."):b(a,10);var o=i||(this.pollingInfo={});o.interval=a;var s=function(){t.pollingInfo&&(Ee(t.queryInfo.networkStatus)?c():t.reobserve({fetchPolicy:"network-only"},C.poll).then(c,c))},c=function(){var u=t.pollingInfo;u&&(clearTimeout(u.timeout),u.timeout=setTimeout(s,u.interval))};c()}}},e.prototype.updateLastResult=function(t,n){return n===void 0&&(n=this.variables),this.last=p(p({},this.last),{result:this.queryManager.assumeImmutableResults?t:rn(t),variables:n}),te(t.errors)||delete this.last.error,this.last},e.prototype.reobserve=function(t,n){var i=this;this.isTornDown=!1;var a=n===C.refetch||n===C.fetchMore||n===C.poll,o=this.options.variables,s=a?_e(this.options,t):Na(this.options,_e(t));a||(this.updatePolling(),t&&t.variables&&!t.fetchPolicy&&!P(t.variables,o)&&(s.fetchPolicy=this.initialFetchPolicy,n===void 0&&(n=C.setVariables)));var c=s.variables&&p({},s.variables),u=this.fetch(s,n),f={next:function(h){i.reportResult(h,c)},error:function(h){i.reportError(h,c)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer,!0),this.concast=u,this.observer=f),u.addObserver(f),u.promise},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(t,n){var i=this.getLastError();(i||this.isDifferentFromLastResult(t))&&((i||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,n),ge(this.observers,"next",t))},e.prototype.reportError=function(t,n){var i=p(p({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:C.error,loading:!1});this.updateLastResult(i,n),ge(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(F);nn(Qt);function $a(r){__DEV__&&b.error("Unhandled error",r.message,r.stack)}function Cn(r){__DEV__&&r&&__DEV__&&b.debug("Missing cache result fields: ".concat(JSON.stringify(r)),r)}function Ba(r){var e=r.fetchPolicy,t=e===void 0?"cache-first":e,n=r.nextFetchPolicy;n&&(r.fetchPolicy=typeof n=="function"?n.call(r,t):n)}var Fn=function(){function r(e){var t=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=t,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return r.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){t.resolvers=cr(t.resolvers,n)}):this.resolvers=cr(this.resolvers,e)},r.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},r.prototype.getResolvers=function(){return this.resolvers||{}},r.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,s=o===void 0?!1:o;return Y(this,void 0,void 0,function(){return X(this,function(c){return t?[2,this.resolveDocument(t,n.data,i,a,this.fragmentMatcher,s).then(function(u){return p(p({},n),{data:u.result})})]:[2,n]})})},r.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},r.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},r.prototype.clientQuery=function(e){return pt(["client"],e)&&this.resolvers?e:null},r.prototype.serverQuery=function(e){return mi(e)},r.prototype.prepareContext=function(e){var t=this.cache;return p(p({},e),{cache:t,getCacheKey:function(n){return t.identify(n)}})},r.prototype.addExportedVariables=function(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),Y(this,void 0,void 0,function(){return X(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then(function(a){return p(p({},t),a.exportedVariables)})]:[2,p({},t)]})})},r.prototype.shouldForceResolvers=function(e){var t=!1;return N.visit(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(t=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),t))return N.BREAK}}}),t},r.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:yi(e),variables:t,returnPartialData:!0,optimistic:!1}).result},r.prototype.resolveDocument=function(e,t,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),Y(this,void 0,void 0,function(){var s,c,u,f,h,l,v,y,d;return X(this,function(m){return s=Vt(e),c=Ke(e),u=We(c),f=s.operation,h=f?f.charAt(0).toUpperCase()+f.slice(1):"Query",l=this,v=l.cache,y=l.client,d={fragmentMap:u,context:p(p({},n),{cache:v,client:y}),variables:i,fragmentMatcher:a,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(s.selectionSet,t,d).then(function(g){return{result:g,exportedVariables:d.exportedVariables}})]})})},r.prototype.resolveSelectionSet=function(e,t,n){return Y(this,void 0,void 0,function(){var i,a,o,s,c,u=this;return X(this,function(f){return i=n.fragmentMap,a=n.context,o=n.variables,s=[t],c=function(h){return Y(u,void 0,void 0,function(){var l,v;return X(this,function(y){return Be(h,o)?U(h)?[2,this.resolveField(h,t,n).then(function(d){var m;typeof d!="undefined"&&s.push((m={},m[ee(h)]=d,m))})]:(Kr(h)?l=h:(l=i[h.name.value],__DEV__?b(l,"No fragment named ".concat(h.name.value)):b(l,9)),l&&l.typeCondition&&(v=l.typeCondition.name.value,n.fragmentMatcher(t,v,a))?[2,this.resolveSelectionSet(l.selectionSet,t,n).then(function(d){s.push(d)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(c)).then(function(){return Xr(s)})]})})},r.prototype.resolveField=function(e,t,n){return Y(this,void 0,void 0,function(){var i,a,o,s,c,u,f,h,l,v=this;return X(this,function(y){return i=n.variables,a=e.name.value,o=ee(e),s=a!==o,c=t[o]||t[a],u=Promise.resolve(c),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(f=t.__typename||n.defaultOperationType,h=this.resolvers&&this.resolvers[f],h&&(l=h[s?a:o],l&&(u=Promise.resolve(Ut.withValue(this.cache,l,[t,Ue(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}]))))),[2,u.then(function(d){if(d===void 0&&(d=c),e.directives&&e.directives.forEach(function(m){m.name.value==="export"&&m.arguments&&m.arguments.forEach(function(g){g.name.value==="as"&&g.value.kind==="StringValue"&&(n.exportedVariables[g.value.value]=d)})}),!e.selectionSet||d==null)return d;if(Array.isArray(d))return v.resolveSubSelectedArray(e,d,n);if(e.selectionSet)return v.resolveSelectionSet(e.selectionSet,d,n)})]})})},r.prototype.resolveSubSelectedArray=function(e,t,n){var i=this;return Promise.all(t.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},r}(),oe=new(re?WeakMap:Map);function st(r,e){var t=r[e];typeof t=="function"&&(r[e]=function(){return oe.set(r,(oe.get(r)+1)%1e15),t.apply(this,arguments)})}function Br(r){r.notifyTimeout&&(clearTimeout(r.notifyTimeout),r.notifyTimeout=void 0)}var ut=function(){function r(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;oe.has(n)||(oe.set(n,0),st(n,"evict"),st(n,"modify"),st(n,"reset"))}return r.prototype.init=function(e){var t=e.networkStatus||C.loading;return this.variables&&this.networkStatus!==C.loading&&!P(this.variables,e.variables)&&(t=C.setVariables),P(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},r.prototype.reset=function(){Br(this),this.lastDiff=void 0,this.dirty=!1},r.prototype.getDiff=function(e){e===void 0&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&P(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var n=this.observableQuery;if(n&&n.options.fetchPolicy==="no-cache")return{complete:!1};var i=this.cache.diff(t);return this.updateLastDiff(i,t),i},r.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},r.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},r.prototype.setDiff=function(e){var t=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),!this.dirty&&!P(n&&n.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},r.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},r.prototype.notify=function(){var e=this;Br(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},r.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Ee(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},r.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=r.prototype.cancel,this.subscriptions.forEach(function(t){return t.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},r.prototype.cancel=function(){},r.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var n=this.observableQuery;if(!(n&&n.options.fetchPolicy==="no-cache")){var i=p(p({},this.getDiffOptions(e)),{watcher:this,callback:function(a){return t.setDiff(a)}});(!this.lastWatch||!P(i,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},r.prototype.resetLastWrite=function(){this.lastWrite=void 0},r.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===oe.get(this.cache)&&P(t,n.variables)&&P(e.data,n.result.data))},r.prototype.markResult=function(e,t,n){var i=this;this.graphQLErrors=te(e.errors)?e.errors:[],this.reset(),t.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(t.variables)):n!==0&&(Tt(e,t.errorPolicy)?this.cache.performTransaction(function(a){if(i.shouldWrite(e,t.variables))a.writeQuery({query:i.document,data:e.data,variables:t.variables,overwrite:n===1}),i.lastWrite={result:e,variables:t.variables,dmCount:oe.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete){e.data=i.lastDiff.diff.result;return}var o=i.getDiffOptions(t.variables),s=a.diff(o);i.stopped||i.updateWatch(t.variables),i.updateLastDiff(s,o),s.complete&&(e.data=s.result)}):this.lastWrite=void 0)},r.prototype.markReady=function(){return this.networkError=null,this.networkStatus=C.ready},r.prototype.markError=function(e){return this.networkStatus=C.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},r}();function Tt(r,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",n=!je(r);return!n&&t&&r.data&&(n=!0),n}var Wa=Object.prototype.hasOwnProperty,Ua=function(){function r(e){var t=e.cache,n=e.link,i=e.queryDeduplication,a=i===void 0?!1:i,o=e.onBroadcast,s=e.ssrMode,c=s===void 0?!1:s,u=e.clientAwareness,f=u===void 0?{}:u,h=e.localState,l=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(re?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.queryDeduplication=a,this.clientAwareness=f,this.localState=h||new Fn({cache:t}),this.ssrMode=c,this.assumeImmutableResults=!!l,(this.onBroadcast=o)&&(this.mutationStore=Object.create(null))}return r.prototype.stop=function(){var e=this;this.queries.forEach(function(t,n){e.stopQueryNoBroadcast(n)}),this.cancelPendingFetches(__DEV__?new q("QueryManager stopped while query was in flight"):new q(11))},r.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},r.prototype.mutate=function(e){var t=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,s=o===void 0?[]:o,c=e.awaitRefetchQueries,u=c===void 0?!1:c,f=e.update,h=e.onQueryUpdated,l=e.errorPolicy,v=l===void 0?"none":l,y=e.fetchPolicy,d=y===void 0?"network-only":y,m=e.keepRootFields,g=e.context;return Y(this,void 0,void 0,function(){var S,_,w;return X(this,function(O){switch(O.label){case 0:return __DEV__?b(t,"mutation option is required. You must specify your GraphQL document in the mutation option."):b(t,12),__DEV__?b(d==="network-only"||d==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):b(d==="network-only"||d==="no-cache",13),S=this.generateMutationId(),t=this.transform(t).document,n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,g)]:[3,2];case 1:n=O.sent(),O.label=2;case 2:return _=this.mutationStore&&(this.mutationStore[S]={mutation:t,variables:n,loading:!0,error:null}),i&&this.markMutationOptimistic(i,{mutationId:S,document:t,variables:n,fetchPolicy:d,errorPolicy:v,context:g,updateQueries:a,update:f,keepRootFields:m}),this.broadcastQueries(),w=this,[2,new Promise(function(R,E){return Ze(w.getObservableFromLink(t,p(p({},g),{optimisticResponse:i}),n,!1),function(k){if(je(k)&&v==="none")throw new ne({graphQLErrors:k.errors});_&&(_.loading=!1,_.error=null);var A=p({},k);return typeof s=="function"&&(s=s(A)),v==="ignore"&&je(A)&&delete A.errors,w.markMutationResult({mutationId:S,result:A,document:t,variables:n,fetchPolicy:d,errorPolicy:v,context:g,update:f,updateQueries:a,awaitRefetchQueries:u,refetchQueries:s,removeOptimistic:i?S:void 0,onQueryUpdated:h,keepRootFields:m})}).subscribe({next:function(k){w.broadcastQueries(),R(k)},error:function(k){_&&(_.loading=!1,_.error=k),i&&w.cache.removeOptimistic(S),w.broadcastQueries(),E(k instanceof ne?k:new ne({networkError:k}))}})})]}})})},r.prototype.markMutationResult=function(e,t){var n=this;t===void 0&&(t=this.cache);var i=e.result,a=[],o=e.fetchPolicy==="no-cache";if(!o&&Tt(i,e.errorPolicy)){a.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables});var s=e.updateQueries;s&&this.queries.forEach(function(u,f){var h=u.observableQuery,l=h&&h.queryName;if(!(!l||!Wa.call(s,l))){var v=s[l],y=n.queries.get(f),d=y.document,m=y.variables,g=t.diff({query:d,variables:m,returnPartialData:!0,optimistic:!1}),S=g.result,_=g.complete;if(_&&S){var w=v(S,{mutationResult:i,queryName:d&&dt(d)||void 0,queryVariables:m});w&&a.push({result:w,dataId:"ROOT_QUERY",query:d,variables:m})}}})}if(a.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var c=[];if(this.refetchQueries({updateCache:function(u){o||a.forEach(function(l){return u.write(l)});var f=e.update;if(f){if(!o){var h=u.diff({id:"ROOT_MUTATION",query:n.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});h.complete&&(i=p(p({},i),{data:h.result}))}f(u,i,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&u.modify({id:"ROOT_MUTATION",fields:function(l,v){var y=v.fieldName,d=v.DELETE;return y==="__typename"?l:d}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(u){return c.push(u)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(c).then(function(){return i})}return Promise.resolve(i)},r.prototype.markMutationOptimistic=function(e,t){var n=this,i=typeof e=="function"?e(t.variables):e;return this.cache.recordOptimisticTransaction(function(a){try{n.markMutationResult(p(p({},t),{result:{data:i}}),a)}catch(o){__DEV__&&b.error(o)}},t.mutationId)},r.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},r.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},r.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},r.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),i=hi(this.cache.transformForLink(n)),a=this.localState.clientQuery(n),o=i&&this.localState.serverQuery(i),s={document:n,hasClientExports:Kn(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:o,defaultVars:At(De(n)),asQuery:p(p({},n),{definitions:n.definitions.map(function(u){return u.kind==="OperationDefinition"&&u.operation!=="query"?p(p({},u),{operation:"query"}):u})})},c=function(u){u&&!t.has(u)&&t.set(u,s)};c(e),c(n),c(a),c(o)}return t.get(e)},r.prototype.getVariables=function(e,t){return p(p({},this.transform(e).defaultVars),t)},r.prototype.watchQuery=function(e){e=p(p({},e),{variables:this.getVariables(e.query,e.variables)}),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var t=new ut(this),n=new Qt({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:e.query,observableQuery:n,variables:e.variables}),n},r.prototype.query=function(e,t){var n=this;return t===void 0&&(t=this.generateQueryId()),__DEV__?b(e.query,"query option is required. You must specify your GraphQL document in the query option."):b(e.query,14),__DEV__?b(e.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):b(e.query.kind==="Document",15),__DEV__?b(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):b(!e.returnPartialData,16),__DEV__?b(!e.pollInterval,"pollInterval option only supported on watchQuery."):b(!e.pollInterval,17),this.fetchQuery(t,e).finally(function(){return n.stopQuery(t)})},r.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},r.prototype.generateRequestId=function(){return this.requestIdCounter++},r.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},r.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},r.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new q("Store reset while query was in flight (not completed in link chain)"):new q(18)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=C.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},r.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var n=new Map,i=new Map,a=new Set;return Array.isArray(e)&&e.forEach(function(o){typeof o=="string"?i.set(o,!1):Yn(o)?i.set(t.transform(o).document,!1):Q(o)&&o.query&&a.add(o)}),this.queries.forEach(function(o,s){var c=o.observableQuery,u=o.document;if(c){if(e==="all"){n.set(s,c);return}var f=c.queryName,h=c.options.fetchPolicy;if(h==="standby"||e==="active"&&!c.hasObservers())return;(e==="active"||f&&i.has(f)||u&&i.has(u))&&(n.set(s,c),f&&i.set(f,!0),u&&i.set(u,!0))}}),a.size&&a.forEach(function(o){var s=wt("legacyOneTimeQuery"),c=t.getQuery(s).init({document:o.query,variables:o.variables}),u=new Qt({queryManager:t,queryInfo:c,options:p(p({},o),{fetchPolicy:"network-only"})});b(u.queryId===s),c.setObservableQuery(u),n.set(s,u)}),__DEV__&&i.size&&i.forEach(function(o,s){o||__DEV__&&b.warn("Unknown query ".concat(typeof s=="string"?"named ":"").concat(JSON.stringify(s,null,2)," requested in refetchQueries options.include array"))}),n},r.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,a){var o=i.options.fetchPolicy;i.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&n.push(i.refetch()),t.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(n)},r.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},r.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,i=e.fetchPolicy,a=e.errorPolicy,o=e.variables,s=e.context,c=s===void 0?{}:s;n=this.transform(n).document,o=this.getVariables(n,o);var u=function(h){return t.getObservableFromLink(n,c,h).map(function(l){if(i!=="no-cache"&&(Tt(l,a)&&t.cache.write({query:n,result:l.data,dataId:"ROOT_SUBSCRIPTION",variables:h}),t.broadcastQueries()),je(l))throw new ne({graphQLErrors:l.errors});return l})};if(this.transform(n).hasClientExports){var f=this.localState.addExportedVariables(n,o,c).then(u);return new F(function(h){var l=null;return f.then(function(v){return l=v.subscribe(h)},h.error),function(){return l&&l.unsubscribe()}})}return u(o)},r.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},r.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},r.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},r.prototype.getLocalState=function(){return this.localState},r.prototype.getObservableFromLink=function(e,t,n,i){var a=this,o;i===void 0&&(i=(o=t==null?void 0:t.queryDeduplication)!==null&&o!==void 0?o:this.queryDeduplication);var s,c=this.transform(e).serverQuery;if(c){var u=this,f=u.inFlightLinkObservables,h=u.link,l={query:c,variables:n,operationName:dt(c)||void 0,context:this.prepareContext(p(p({},t),{forceFetch:!i}))};if(t=l.context,i){var v=f.get(c)||new Map;f.set(c,v);var y=Z(n);if(s=v.get(y),!s){var d=new me([_t(h,l)]);v.set(y,s=d),d.cleanup(function(){v.delete(y)&&v.size<1&&f.delete(c)})}}else s=new me([_t(h,l)])}else s=new me([F.of({data:{}})]),t=this.prepareContext(t);var m=this.transform(e).clientQuery;return m&&(s=Ze(s,function(g){return a.localState.runResolvers({document:m,remoteResult:g,context:t,variables:n})})),s},r.prototype.getResultsFromLink=function(e,t,n){var i=e.lastRequestId=this.generateRequestId();return Ze(this.getObservableFromLink(e.document,n.context,n.variables),function(a){var o=te(a.errors);if(i>=e.lastRequestId){if(o&&n.errorPolicy==="none")throw e.markError(new ne({graphQLErrors:a.errors}));e.markResult(a,n,t),e.markReady()}var s={data:a.data,loading:!1,networkStatus:e.networkStatus||C.ready};return o&&n.errorPolicy!=="ignore"&&(s.errors=a.errors),s},function(a){var o=xa(a)?a:new ne({networkError:a});throw i>=e.lastRequestId&&e.markError(o),o})},r.prototype.fetchQueryObservable=function(e,t,n){var i=this;n===void 0&&(n=C.loading);var a=this.transform(t.query).document,o=this.getVariables(a,t.variables),s=this.getQuery(e),c=t.fetchPolicy,u=c===void 0?"cache-first":c,f=t.errorPolicy,h=f===void 0?"none":f,l=t.returnPartialData,v=l===void 0?!1:l,y=t.notifyOnNetworkStatusChange,d=y===void 0?!1:y,m=t.context,g=m===void 0?{}:m,S=Object.assign({},t,{query:a,variables:o,fetchPolicy:u,errorPolicy:h,returnPartialData:v,notifyOnNetworkStatusChange:d,context:g}),_=function(O){return S.variables=O,i.fetchQueryByPolicy(s,S,n)};this.fetchCancelFns.set(e,function(O){setTimeout(function(){return w.cancel(O)})});var w=new me(this.transform(S.query).hasClientExports?this.localState.addExportedVariables(S.query,S.variables,S.context).then(_):_(S.variables));return w.cleanup(function(){i.fetchCancelFns.delete(e),Ba(t)}),w},r.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,i=e.include,a=e.optimistic,o=a===void 0?!1:a,s=e.removeOptimistic,c=s===void 0?o?wt("refetchQueries"):void 0:s,u=e.onQueryUpdated,f=new Map;i&&this.getObservableQueries(i).forEach(function(l,v){f.set(v,{oq:l,lastDiff:t.getQuery(v).getDiff()})});var h=new Map;return n&&this.cache.batch({update:n,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(l,v,y){var d=l.watcher instanceof ut&&l.watcher.observableQuery;if(d){if(u){f.delete(d.queryId);var m=u(d,v,y);return m===!0&&(m=d.refetch()),m!==!1&&h.set(d,m),m}u!==null&&f.set(d.queryId,{oq:d,lastDiff:y,diff:v})}}}),f.size&&f.forEach(function(l,v){var y=l.oq,d=l.lastDiff,m=l.diff,g;if(u){if(!m){var S=y.queryInfo;S.reset(),m=S.getDiff()}g=u(y,m,d)}(!u||g===!0)&&(g=y.refetch()),g!==!1&&h.set(y,g),v.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(v)}),c&&this.cache.removeOptimistic(c),h},r.prototype.fetchQueryByPolicy=function(e,t,n){var i=this,a=t.query,o=t.variables,s=t.fetchPolicy,c=t.refetchWritePolicy,u=t.errorPolicy,f=t.returnPartialData,h=t.context,l=t.notifyOnNetworkStatusChange,v=e.networkStatus;e.init({document:a,variables:o,networkStatus:n});var y=function(){return e.getDiff(o)},d=function(w,O){O===void 0&&(O=e.networkStatus||C.loading);var R=w.result;__DEV__&&!f&&!P(R,{})&&Cn(w.missing);var E=function(k){return F.of(p({data:k,loading:Ee(O),networkStatus:O},w.complete?null:{partial:!0}))};return R&&i.transform(a).hasForcedResolvers?i.localState.runResolvers({document:a,remoteResult:{data:R},context:h,variables:o,onlyRunForcedResolvers:!0}).then(function(k){return E(k.data||void 0)}):E(R)},m=s==="no-cache"?0:n===C.refetch&&c!=="merge"?1:2,g=function(){return i.getResultsFromLink(e,m,{variables:o,context:h,fetchPolicy:s,errorPolicy:u})},S=l&&typeof v=="number"&&v!==n&&Ee(n);switch(s){default:case"cache-first":{var _=y();return _.complete?[d(_,e.markReady())]:f||S?[d(_),g()]:[g()]}case"cache-and-network":{var _=y();return _.complete||f||S?[d(_),g()]:[g()]}case"cache-only":return[d(y(),e.markReady())];case"network-only":return S?[d(y()),g()]:[g()];case"no-cache":return S?[d(e.getDiff()),g()]:[g()];case"standby":return[]}},r.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new ut(this,e)),this.queries.get(e)},r.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return p(p({},t),{clientAwareness:this.clientAwareness})},r}(),Wr=!1;function ct(r,e){return _e(r,e,e.variables&&{variables:p(p({},r.variables),e.variables)})}var Ka=function(){function r(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,i=e.credentials,a=e.headers,o=e.cache,s=e.ssrMode,c=s===void 0?!1:s,u=e.ssrForceFetchDelay,f=u===void 0?0:u,h=e.connectToDevTools,l=h===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:h,v=e.queryDeduplication,y=v===void 0?!0:v,d=e.defaultOptions,m=e.assumeImmutableResults,g=m===void 0?!1:m,S=e.resolvers,_=e.typeDefs,w=e.fragmentMatcher,O=e.name,R=e.version,E=e.link;if(E||(E=n?new Xi({uri:n,credentials:i,headers:a}):Ce.empty()),!o)throw __DEV__?new q(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new q(7);if(this.link=E,this.cache=o,this.disableNetworkFetches=c||f>0,this.queryDeduplication=y,this.defaultOptions=d||{},this.typeDefs=_,f&&setTimeout(function(){return t.disableNetworkFetches=!1},f),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),l&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!Wr&&__DEV__&&(Wr=!0,typeof window!="undefined"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var k=window.navigator,A=k&&k.userAgent,z=void 0;typeof A=="string"&&(A.indexOf("Chrome/")>-1?z="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":A.indexOf("Firefox/")>-1&&(z="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),z&&__DEV__&&b.log("Download the Apollo DevTools for a better development experience: "+z)}this.version=Ii,this.localState=new Fn({cache:o,client:this,resolvers:S,fragmentMatcher:w}),this.queryManager=new Ua({cache:this.cache,link:this.link,queryDeduplication:y,ssrMode:c,clientAwareness:{name:O,version:R},localState:this.localState,assumeImmutableResults:g,onBroadcast:l?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return r.prototype.stop=function(){this.queryManager.stop()},r.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=ct(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=p(p({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},r.prototype.query=function(e){return this.defaultOptions.query&&(e=ct(this.defaultOptions.query,e)),__DEV__?b(e.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):b(e.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=p(p({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},r.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=ct(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},r.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},r.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},r.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},r.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},r.prototype.__requestRaw=function(e){return _t(this.link,e)},r.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},r.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},r.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(n){return n!==e})}},r.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(n){return n!==e})}},r.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},r.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],i=[];t.forEach(function(o,s){n.push(s),i.push(o)});var a=Promise.all(i);return a.queries=n,a.results=i,a.catch(function(o){__DEV__&&b.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(o))}),a},r.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},r.prototype.extract=function(e){return this.cache.extract(e)},r.prototype.restore=function(e){return this.cache.restore(e)},r.prototype.addResolvers=function(e){this.localState.addResolvers(e)},r.prototype.setResolvers=function(e){this.localState.setResolvers(e)},r.prototype.getResolvers=function(){return this.localState.getResolvers()},r.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},r.prototype.setLink=function(e){this.link=this.queryManager.link=e},r}(),Ae=new Map,Mt=new Map,Rn=!0,$e=!1;function Qn(r){return r.replace(/[\s,]+/g," ").trim()}function Ga(r){return Qn(r.source.body.substring(r.start,r.end))}function Ha(r){var e=new Set,t=[];return r.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var i=n.name.value,a=Ga(n.loc),o=Mt.get(i);o&&!o.has(a)?Rn&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||Mt.set(i,o=new Set),o.add(a),e.has(a)||(e.add(a),t.push(n))}else t.push(n)}),p(p({},r),{definitions:t})}function Ja(r){var e=new Set(r.definitions);e.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(i){var a=n[i];a&&typeof a=="object"&&e.add(a)})});var t=r.loc;return t&&(delete t.startToken,delete t.endToken),r}function Ya(r){var e=Qn(r);if(!Ae.has(e)){var t=N.parse(r,{experimentalFragmentVariables:$e,allowLegacyFragmentVariables:$e});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Ae.set(e,Ja(Ha(t)))}return Ae.get(e)}function I(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof r=="string"&&(r=[r]);var n=r[0];return e.forEach(function(i,a){i&&i.kind==="Document"?n+=i.loc.source.body:n+=i,n+=r[a+1]}),Ya(n)}function Xa(){Ae.clear(),Mt.clear()}function Za(){Rn=!1}function eo(){$e=!0}function to(){$e=!1}var ye={gql:I,resetCaches:Xa,disableFragmentWarnings:Za,enableExperimentalFragmentVariables:eo,disableExperimentalFragmentVariables:to};(function(r){r.gql=ye.gql,r.resetCaches=ye.resetCaches,r.disableFragmentWarnings=ye.disableFragmentWarnings,r.enableExperimentalFragmentVariables=ye.enableExperimentalFragmentVariables,r.disableExperimentalFragmentVariables=ye.disableExperimentalFragmentVariables})(I||(I={}));I.default=I;const ro=I`
    query products(
        $first: Int,
        $query: String,
        $country: CountryCode!
    ) @inContext(country: $country) {
        products(first: $first, query: $query) {
          edges {
              node {
                  images(first: 1) {
                    edges {
                      node {
                        src
                        originalSrc
                        id
                        height
                        width
                        altText
                      }
                    }
                  }
                  variants(first:20){
                    edges{
                      node{
                        id
                        title
                        weight
                        availableForSale
                        sku
                        priceV2{
                          amount
                          currencyCode
                        }
                        compareAtPriceV2{
                          amount
                          currencyCode
                        }
                        image{
                          id
                          altText
                          originalSrc
                          transformedSrc
                        }
                        selectedOptions{
                          name
                          value
                        }
                        product{
                          id
                          title
                          availableForSale
                          handle
                          description
                          descriptionHtml
                          images(first:20){
                            edges{
                              node{
                                id
                                altText
                                originalSrc
                                transformedSrc
                              }
                            }
                          }
                          productType
                          options{
                            id
                            name
                            values
                          }
                        }
                      }
                    }
                  }
                  options {
                    id
                    name
                    values
                  }
                  tags
                  productType
                  title
                  vendor
                  publishedAt
                  createdAt
                  updatedAt
                  publishedAt
                  id
                  description
                  descriptionHtml
                  handle
              }
          }
        } 
    }
`,Tn=(r,e=!1,t="en",n="en")=>e?n==="en"?t.toUpperCase():n.toUpperCase():r.res.req.cookies["vsf-locale"]?r.res.req.cookies["vsf-locale"]==="en"?"US":r.res.req.cookies["vsf-locale"].toUpperCase():"US";async function no(r,e,t){var o;const n={query:e.term,first:(o=e.perPage)!=null?o:5,country:Tn(r)},{products:i}=r.extendQuery(t,{products:{query:ro,variables:n}}),a=await r.client.apolloClient.query({query:i.query,variables:i.variables});return a!=null?a:null}const io=I`
    mutation customerRecover($email: String!) {
      customerRecover(email: $email) {
        customerUserErrors {
          code
          field
          message
        }
      }
    }
`;async function ao(r,e){const t={email:e.email};return await r.client.apolloClient.mutate({mutation:io,variables:t})}const oo=I`
    mutation customerCreate($input: CustomerCreateInput!) {
        customerCreate(input: $input) {
            customer {
              id
            }
            customerUserErrors {
              code
              field
              message
            }
          }
    }
`;async function so(r,e){const t={input:e};return(await r.client.apolloClient.mutate({mutation:oo,variables:t})).data.customerCreate}const uo=I`
query filters($handle: String!) {
    collectionByHandle(handle: $handle) {
      handle
      products {
        filters {
          id
          label
          type
          values {
            id
            label
            count
            input
          }
        }
      }
    }
}
`;async function co(r,e,t){const n={handle:e.handle},{filters:i}=r.extendQuery(t,{filters:{query:uo,variables:n}}),a=await r.client.apolloClient.query({query:i.query,variables:i.variables});return a!=null?a:null}function fo(r){function e(){return!r.min&&!r.max?{}:{price:j(j({},r.min&&{min:parseFloat(r.min)}),r.max&&{max:parseFloat(r.max)})}}return j({},e())}const lo=I`query collection($handle: String, $first: Int, $filters: [ProductFilter!], $country: CountryCode!) @inContext(country: $country ){
    collection(handle: $handle) {
      id
      handle
      title
      description
      descriptionHtml
      updatedAt
      image {
        src
        url
      }
      products(filters: $filters, first: $first) {
        edges {
          node {
            images(first: 1) {
              edges {
                node {
                  src
                  originalSrc
                  id
                  height
                  width
                  altText
                }
              }
            }
            totalInventory
            variants(first: 1) {
              edges {
                node {
                  id
                  price
                  availableForSale
                  compareAtPrice
                  priceV2{
                    amount
                    currencyCode
                  }
                  compareAtPriceV2{
                    amount
                    currencyCode
                  }
                }
              }
            }
            options {
              id
              name
              values
            }
            tags
            productType
            title
            vendor
            publishedAt
            createdAt
            updatedAt
            publishedAt
            id
            description
            descriptionHtml
            handle
          }
        }
      }
    }
  }
`;async function ho(r,{categorySlug:e,itemsPerPage:t,filters:n},i){const a={handle:e,first:t!=null?t:5,filters:fo(n),country:Tn(r)},{collection:o}=r.extendQuery(i,{collection:{query:lo,variables:a}}),s=await r.client.apolloClient.query({query:o.query,variables:o.variables});return s!=null?s:null}const po=I`
    query page(
      $handle: String
      $id: ID
    ) {
        page(handle: $handle, id: $id) {
          id
          handle
          title
          onlineStoreUrl
          bodySummary
          body
          createdAt
        }
    }
`;async function vo(r,e,t){var a;const n=j(j({},e.handle&&{handle:e.handle}),e.id&&{id:e.id}),{page:i}=r.extendQuery(t,{page:{query:po,variables:n}});return(a=await r.client.apolloClient.query({query:i.query,variables:i.variables}))!=null?a:null}const yo=I`
    query getBlogs(
      $after: String
      $before: String
      $first: Int
      $last: Int
      $query: String
      $reverse: Boolean
      $sortKey: BlogSortKeys
    ) {
        blogs(after: $after, before: $before, first: $first, last: $last, query: $query, reverse: $reverse, sortKey: $sortKey) {
          edges {
            node {
              id
              handle
              title
              authors {
                bio
                email
                firstName
                lastName
                name
              }
              onlineStoreUrl
              seo {
                description
                title
              }
            }
          }
        }
    }
`;async function mo(r,e,t){var o,s,c;const n=j({first:5},e),{blogs:i}=r.extendQuery(t,{blogs:{query:yo,variables:n}}),a=await r.client.apolloClient.query({query:i.query,variables:i.variables});return $(j({},a),{data:$(j({},a==null?void 0:a.data),{blogs:(c=(s=(o=a==null?void 0:a.data)==null?void 0:o.blogs)==null?void 0:s.edges)==null?void 0:c.map(u=>{var f,h,l;return $(j({},u==null?void 0:u.node),{link:`${(h=(f=r.config)==null?void 0:f.cms)==null?void 0:h.blogs}/${(l=u==null?void 0:u.node)==null?void 0:l.handle}`})})})})}const go=I`
query getBlog(
  $handle: String
  $id: ID
) {
  blog(handle: $handle, id: $id) {
    id
    title
    authors {
      bio
      email
      firstName
      lastName
      name
    }
    onlineStoreUrl
    seo {
      description
      title
    }
  }
}
`;async function bo(r,e,t){const{blog:n}=r.extendQuery(t,{blog:{query:go,variables:e}}),i=await r.client.apolloClient.query({query:n.query,variables:n.variables});return i!=null?i:null}async function wo(r,e,t){var s,c,u,f,h;const n=I`
  query getArticles(
    $after: String,
    $before: String,
    $first: Int,
    $last: Int,
    $query: String,
    $reverse: Boolean,
    $sortKey: ArticleSortKeys,
    $truncateContent: Int
  ) {
    articles(after: $after, before: $before, first: $first, last: $last, query: $query, reverse: $reverse, sortKey: $sortKey) {
      pageInfo {
        hasNextPage
        hasPreviousPage
      }
      edges {
        cursor
        node {
          id
          handle
          onlineStoreUrl
          publishedAt
          tags
          title
          content(truncateAt: $truncateContent)
          image {
            transformedSrc
            altText
            url
          }
          seo {
            description
            title
          }
          blog {
            handle
            title
          }
        }
      }
    }
  }
`,i=j({first:5},e),{articles:a}=r.extendQuery(t,{articles:{query:n,variables:i}}),o=await r.client.apolloClient.query({query:a.query,variables:a.variables});return $(j({},o),{pageInfo:(c=(s=o==null?void 0:o.data)==null?void 0:s.articles)==null?void 0:c.pageInfo,data:$(j({},o==null?void 0:o.data),{articles:(h=(f=(u=o==null?void 0:o.data)==null?void 0:u.articles)==null?void 0:f.edges)==null?void 0:h.map(l=>{var v,y,d,m,g;return $(j({},l==null?void 0:l.node),{link:`${(y=(v=r.config)==null?void 0:v.cms)==null?void 0:y.blogs}/${(m=(d=l==null?void 0:l.node)==null?void 0:d.blog)==null?void 0:m.handle}/${(g=l==null?void 0:l.node)==null?void 0:g.handle}`,cursor:l==null?void 0:l.cursor})})})})}async function _o(r,e,t){var s,c,u;const n=I`
  query getArticle(
    $id: ID!
  ) {
    node(id: $id) {
      ... on Article {
        id
        handle
        onlineStoreUrl
        publishedAt
        tags
        title
        content
        authorV2 {
          bio
          email
          firstName
          lastName
          name
        }
        image {
          transformedSrc
          altText
          url
        }
        seo {
          description
          title
        }
        blog {
          handle
          title
        }
      }
    }
  }
`,{article:i}=r.extendQuery(t,{article:{query:n,variables:e}}),a=await r.client.apolloClient.query({query:i.query,variables:i.variables}),o=(s=a==null?void 0:a.data)==null?void 0:s.node;return $(j({},a),{data:$(j({},a==null?void 0:a.data),{article:$(j({},o),{fullAuthorName:(u=(c=o==null?void 0:o.authorV2)==null?void 0:c.name)!=null?u:""})})})}async function So(r,e){var a,o,s;const t=I`
  query getLocalization {
    localization {
      availableCountries {
        name
        isoCode
        currency {
          isoCode
          name
          symbol
        }
      }
    }
  }
`,{availableCountries:n}=r.extendQuery(e,{availableCountries:{query:t,variables:{}}}),i=await r.client.apolloClient.query({query:n.query});return(s=(o=(a=i==null?void 0:i.data)==null?void 0:a.localization)==null?void 0:o.availableCountries)!=null?s:[]}const Oo={searchProduct:no,customerRecover:ao,customerCreate:so,availableFilters:co,getCollection:ho,getPage:vo,getBlogs:mo,getBlog:bo,getArticles:wo,getArticle:_o,availableCountries:So};function Eo(){return Oo}function ko(r){return new Ka({uri:`https://${r.api.domain}/api/2022-01/graphql.json`,ssrMode:!0,cache:new Ia,headers:{"X-Shopify-Storefront-Access-Token":r.api.storefrontAccessToken}})}exports.createShopifyApollo=ko;exports.getShopifyApolloAPIs=Eo;
